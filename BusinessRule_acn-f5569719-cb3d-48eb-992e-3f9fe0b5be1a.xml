<?xml version="1.0" encoding="UTF-8"?>
<STEP-ProductInformation ContextID="Context1" WorkspaceID="Main" UseContextLocale="false">
    <BusinessRules>
        <BusinessRule ID="acn-f5569719-cb3d-48eb-992e-3f9fe0b5be1a" Scope="Global" Type="Action" RunPrivileged="false" Selected="true" Referenced="true"><!-- Definition:
Action #1 (JavaScriptBusinessActionWithBinds):
<config>
  <bindings>
    <binding alias="node" type="Node" contract="CurrentObjectBindContract"/>
    <binding alias="step" type="Manager" contract="ManagerBindContract"/>
    <binding alias="logger" type="Logger" contract="LoggerBindContract"/>
    <binding alias="mailer" type="MailHome" contract="MailHomeBindContract"/>
    <binding alias="workflow" type="Workflow" contract="CurrentWorkflowBindContract"/>
    <binding alias="lookup" type="LookupTableHome" contract="LookupTableHomeBindContract"/>
  </bindings>
  <messages/>
  <javaScript>
//********************** 1 ***************************
/*======MDSIM-3015 Starts======*/
var isInboundItem = node.getValue("InboundFlag").getSimpleValue();
var InitiatorID = node.getValue("InitiatorID").getSimpleValue();
if (isInboundItem != "Yes") {
    marketCategory.createMarketCatFacSuppExt(node, step, logger, mailer, lookup); //PROD ISSUE:INC11508702
}
/*======MDSIM-3015 End======*/
//MDSIM-4666 - start
var errorMSG = approvalLib.productClassificationCheck(node, step);
if (errorMSG != true) {
    throw errorMSG;
}
//MDSIM-4666 - end

//BR executes on Data Team Submission for NewItemOnboarding w/f
var revision_chk = node.getWorkflowInstance(workflow).getSimpleVariable("REV_FLAG");
var delegateAssignee = node.getWorkflowInstance(workflow).getSimpleVariable("DELIGATE_ASSIGNEE"); //0813
var inputUserId = null;
//3948 
inputUserId = deligateUserLib.fetchDeligateUser(node, workflow, step, logger);
if (inputUserId == "Approval_Grid_Users") {
    throw "User cannot Choose Approval Grid Assignee.";
}


if (inputUserId != null) {
    deligateUserLib.ValidateUserBelongsToItemGroups(inputUserId, node, step, workflow);
    node.getValue("AuthorizeforApprovalforAllMarkets").setSimpleValue(inputUserId);
}



var suppStatus = node.getValue("SupplierRevisionRequired").getSimpleValue();

//Coding for US 2196 Started
if (suppStatus != "Yes") {
    validate.validateItem(node, step, logger, lookup);
}
//Coding for US 2196 Ended


var RequestorEmail = node.getValue("DataReviewTeamEmail").getSimpleValue();
var RevisionFlag = node.getValue("RevisionFlag").getSimpleValue();
var temporaryObjectsStatus;
var tempCreation;
var Category_ID = "";
var Category_ID_Code = "";
var gridStatus = "";
var temp = 0;
var Market;
//var IsNewProduct = node.getValue("IsNewProduct").getSimpleValue(); // Commented by Sourav Tamli for MDSIM - 4898
var IsAutoApproved = node.getValue("InboundFlag").getSimpleValue();
var Responsible_Entity = node.getValue("ItemResponsibleEntity").getSimpleValue();
var Managed_By = node.getValue("ItemManagedBy").getSimpleValue();

//MDSIM-5237 - start
var productGroupValue = node.getValue("ProductGroup").getID(); //MDSIM-4666
if (Responsible_Entity == null || productGroupValue == "SER") Responsible_Entity = "";
if (Managed_By == null || productGroupValue == "SER") Managed_By = "";

//MDSIM-5237 - end

//MDSIM-4666 - start
var approvalUser = null;
/*if(inputUserId == null){
	if (((Responsible_Entity.equals("Global")) && (!Managed_By.equals("McDonald's")) && (RevisionFlag != "Yes") && (!Managed_By.equals("USA New Product Group"))) || ((Responsible_Entity.equals("Market")) && (!Managed_By.equals("McDonald's")) && (RevisionFlag != "Yes") && (!Managed_By.equals("USA New Product Group")))) {
		approvalUser = approvalLib.getApproverFromItemHierarchy(node, step, "XCM");
		logger.info("XCM Scenario approvalUser "+approvalUser);
	}else if(Managed_By.equals("USA New Product Group")){
		approvalUser = approvalLib.getApproverFromItemHierarchy(node, step, "NewProductGroup");
		logger.info("NewProductGroup Scenario approvalUser "+approvalUser);
	}else{
		approvalUser = approvalLib.getApproverFromItemHierarchy(node, step, null);
		logger.info("Global/Market Scenario approvalUser "+approvalUser);
	}
	//inputUserId = approvalUser;
}*/
//MDSIM-4666 - end
if (((Responsible_Entity.equals("Global")) && (!Managed_By.equals("McDonald's"))) || ((Responsible_Entity.equals("Market")) && (!Managed_By.equals("McDonald's")))) {
    gridStatus = "External";
} else if ((Responsible_Entity.equals("Global")) && (Managed_By.equals("McDonald's"))) {
    gridStatus = "Global";
} else if (((Responsible_Entity.equals("Market")) && (Managed_By.equals("McDonald's")))) {
    gridStatus = "Market";
} else if ((Managed_By.equals("USA New Product Group"))) { // Added by Sourav Tamli for MDSIM - 4898

    gridStatus = "Market";
}

//MDSIM-7887-start
//marketCategory.updateVendorDirectFlag(node,node,step,logger);
//MDSIM-7887-end
if (suppStatus != "Yes") {

    var note = node.getValue("ItemReviewNote").getSimpleValue();
    if ((note != null && revision_chk == "yes") || (note == null) || (note != null)) {
        var Mc_id = "";
        var user_group = "";
        var region = "";
        var user_flag;
        var Market_ID = "";
        delRejectReference(node);
        //addAI();
        var references = node.getProductReferences().asSet().iterator();

        var Category = node.getValue("ProductCategory").getSimpleValue();
        //Updated GRID_Type from SIM_Facility_Approval_GRID to SIM_ITEM_APPROVAL_GRID by Debajit (Defect MDSIM-1626)
        var GRID_type = "SIM_ITEM_APPROVAL_GRID";
        var child_ent = step.getEntityHome().getEntityByID("SIM_Market_Category_Details").getChildren().toArray();

        var references = node.getReferences().asSet().iterator();
        while (references.hasNext()) {
            var reference = references.next()
            if (reference.getReferenceType() == "ItemToMarketExtension") {
                var targetMarketName = reference.getTarget().getName();
                for (var i = 0; i < child_ent.length; i++) {

                    if (targetMarketName == child_ent[i].getName()) {
                        Market_ID = child_ent[i].getID();
                        var child_cat = step.getEntityHome().getEntityByID(Market_ID).getChildren().toArray();
                        for (var j = 0; j < child_cat.length; j++) {
                            if (Category == child_cat[j].getName()) {
                                CategoryID = child_cat[j].getID();
                                var split = CategoryID.split("_");
                                Category_ID = split[1] + "_" + split[2];
                                var conc = Market_ID + "_" + Category_ID
                                Category_ID_Code = Category_ID;

                            }
                        }
                    }
                }
            }
        }
        if (IsAutoApproved == "Yes") {
            user_group = "sim_DataTeamUser";
            populateValuesForAutoApproval(node);
            logger.info(user_group + "-_-1user_group1-_-_-_-" + counter);
            node.getWorkflowInstance(workflow).setSimpleVariable("ASSIGNEE_QA", user_group);
            logger.info("-_-1user_group2-_-_-_-" + counter);

        } else if (((Responsible_Entity.equals("Global")) && (!Managed_By.equals("McDonald's")) && (RevisionFlag != "Yes") && (!Managed_By.equals("USA New Product Group"))) || ((Responsible_Entity.equals("Market")) && (!Managed_By.equals("McDonald's")) && (RevisionFlag != "Yes") && (!Managed_By.equals("USA New Product Group")))) {
            var Assigned_Group;
            var FlagCheckForXCMRouting = false;
            logger.info("Inside External Grid");
            var ItemManagedBy = node.getValue("ItemManagedBy").getSimpleValue();
            var ItemResponsibleEntity = node.getValue("ItemResponsibleEntity").getSimpleValue();
            var Category = node.getValue("ProductCategory").getSimpleValue();
            var MarketRef = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension")).toArray();

            if (MarketRef.length > 1) {
                var references = node.getReferences().asSet().iterator();
                var counter = 0;
                while (references.hasNext()) {
                    var reference = references.next();
                    if ((reference.getReferenceType() == "ItemToMarketExtension")) {
                        var status = reference.getValue("MarketExtensionStatus").getSimpleValue();
                        if (status == "Approve") {
                            counter++;
                        }
                    }
                    logger.info("-_-Counter-_-_-_-" + counter);
                }

                logger.info("Exiting While");
                if (counter > 1) {
                    node.getValue("MultiMarketFlag").setSimpleValue("Yes");
                    createTempObjforXCM("ItemToMarketExtension");

                }


            } else {

                node.getValue("MultiMarketFlag").setSimpleValue("No");
                var currNode = node.getID();
                GRID_type = "External_Category_Manager";
                var marketExtensionRef = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension");
                var marketExtensionRefObj = node.getReferences(marketExtensionRef);
                var marketName = "";
                for (var i = 0; i < marketExtensionRefObj.size(); i++) {
                    marketName = marketExtensionRefObj.get(i).getTarget().getName();
                    var region = get_region(marketName);
                    var targetMarketID = marketExtensionRefObj.get(i).getTarget().getID();
                    var child_ent = step.getEntityHome().getEntityByID("SIM_Market_Category_Details").getChildren().toArray();
                    if (marketName == child_ent[i].getName()) {
                        Market_ID = child_ent[i].getID();
                        var child_cat = step.getEntityHome().getEntityByID(Market_ID).getChildren().toArray();
                        for (var j = 0; j < child_cat.length; j++) {
                            if (Category == child_cat[j].getName()) {
                                CategoryID = child_cat[j].getID();
                                var split = CategoryID.split("_");
                                Category_ID = split[1] + "_" + split[2];
                                var conc = Market_ID + "_" + Category_ID;

                            }
                        }
                    }
                    // MDSIM - 4666 fix by Sourav Tamli ::  Started //
                    //user_group = checkApprovalGrid.delegateRequestToApprovalGrid(node, step, logger, targetMarketID, marketName, Category_ID, Category, null, "0", null, lookup);

                    var CheckMcClementMarket = step.getListOfValuesHome().getListOfValuesByID("McClementXCMMarkets").getListOfValuesValueByID(targetMarketID);
                    if (CheckMcClementMarket != null && Managed_By == "McClement") {

                        FlagCheckForXCMRouting = true;

                    } else if (Managed_By == "HAVI" || Managed_By == "TMS") {

                        var CheckApprovalGridForHAVI_TMS = checkApprovalGrid.Check_HAVI_TMS_Approval_GRID(node, step, "XCM", marketName, Managed_By, null, "ONBRD/EXTND");
                        //throw "CheckApprovalGridForHAVI_TMS ::"+CheckApprovalGridForHAVI_TMS
                        if (CheckApprovalGridForHAVI_TMS != "DATATEAMUSER" && CheckApprovalGridForHAVI_TMS != "" && CheckApprovalGridForHAVI_TMS != false && CheckApprovalGridForHAVI_TMS != undefined) {

                            FlagCheckForXCMRouting = true;

                        }

                    }

                }

                //throw "FlagCheckForXCMRouting ::"+FlagCheckForXCMRouting
                if (FlagCheckForXCMRouting) {
                    //If user group is related TMS/HAVI/McClement comes here
                    if (inputUserId == null) {
                        Assigned_Group = approvalLib.getApproverFromItemHierarchy(node, step, "XCM", marketName, Managed_By, lookup);
                    }
                } else {
                    if (inputUserId == null) {
                        Assigned_Group = approvalLib.getApproverFromItemHierarchy(node, step, null, marketName, Managed_By, lookup);
                    }
                }


                logger.info(marketName + "-marketName-" + "-user grp-_-_-_-_-" + user_group);
                node.getValue("TradeItemStatus").setSimpleValue("Pending External Approval");
                updatestatus.updateStatusForMarket(node, step, logger, "Pending External Approval");
                gridStatus = "External";
                node.getWorkflowInstance(workflow).setSimpleVariable("ASSIGNEE_QA", Assigned_Group);
				
                populateFacilityValuesForMrktExtension(node);
                populateStatesOnEntryCreatedOn(node, "XCMOnEntryCreatedOn")

                // MDSIM - 5351 ::: Implementation Started by Sourav Tamli //
                var CheckTheInitiatorWithApprover = CheckInitiatorIDWithApprovers(Assigned_Group, InitiatorID, step);
                if (CheckTheInitiatorWithApprover) {

                    node.getValue("ApproverMatch").setSimpleValue("Yes");

                }
                // MDSIM - 5351 ::: Implementation Ended by Sourav Tamli //

            }
            // MDSIM - 4666 fix by Sourav Tamli ::  Ended //


        } else if ((Responsible_Entity.equals("Global")) && (Managed_By.equals("McDonald's")) && (RevisionFlag != "Yes") && (!Managed_By.equals("USA New Product Group"))) {
            var Assigned_Group;
            logger.info("Inside Global Grid");
            node.getValue("TradeItemStatus").setSimpleValue("Pending Global Approval");
            updatestatus.updateStatusForMarket(node, step, logger, "Pending Global Approval");
            gridStatus = "Global";
            var MarketRef = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension")).toArray();
            if (MarketRef.length >= 1) {
                var references = node.getReferences().asSet().iterator();
                var counter = 0;
                while (references.hasNext()) {
                    var reference = references.next();
                    if ((reference.getReferenceType() == "ItemToMarketExtension")) {
                        var status = reference.getValue("MarketExtensionStatus").getSimpleValue();
                        if (status == "Approve") {
                            counter++;
                        }
                    }
                    logger.info("-_-Counter-_-_-_-" + counter);
                }
                logger.info("Exiting While");
                if (counter >= 1) {
                    logger.info("inside Counter before creating temp");
                    createTempObjforGlobal();
                    if (tempCreation == false) {
                        var references = node.getReferences().asSet().iterator();
                        while (references.hasNext()) {
                            var reference = references.next();
                            if (reference.getReferenceType() == "ItemToMarketExtension") {
                                var targetMarketName = reference.getTarget().getName();
                                for (var i = 0; i < child_ent.length; i++) {
                                    if (targetMarketName == child_ent[i].getName()) {
                                        Market = child_ent[i].getName();
                                        logger.info("-_-Market-_-_-_-" + Market);
                                    }
                                }
                            }
                        }
                        //Updated GRID_Type to SIM_ITEM_GLOBAL_APPROVAL_GRID by Debajit (Defect MDSIM-1626)
                        GRID_type = "SIM_ITEM_GLOBAL_APPROVAL_GRID";
                        region = step.getListOfValuesHome().getListOfValuesByID("SIM_Market_Region").getListOfValuesValueByID(Market).getValue();

                        //***US : 3948-> Implementation Started*****//
                        if (inputUserId == null) {
                            user_group = region + "_" + Category_ID + "_Item"
                            //MDSIM-4666 - start
                            var marketsList = new java.util.ArrayList();
                            marketsList.add(Market);
                            Assigned_Group = get_Global_Responsibility_Facility_GRID_users(region, Category, GRID_type, user_group, marketsList, node, step, logger); //MDSIM-4666 : added market list as parameter
                            //MDSIM-4666 - end
                        } else {
                            Assigned_Group = inputUserId;
                        }
                        //***US : 3948-> Implementation Ended*****//

                        node.getWorkflowInstance(workflow).setSimpleVariable("ASSIGNEE_QA", Assigned_Group);
                        populateFacilityValuesForMrktExtension(node);
                        // MDSIM - 5351 ::: Implementation Started by Sourav Tamli //
                        var CheckTheInitiatorWithApprover = CheckInitiatorIDWithApprovers(Assigned_Group, InitiatorID, step);
                        if (CheckTheInitiatorWithApprover) {

                            node.getValue("ApproverMatch").setSimpleValue("Yes");

                        }
                        // MDSIM - 5351 ::: Implementation Ended by Sourav Tamli //

                    }
                } else if ((counter <= 1) && (status == "Reject")) {
                    logger.info("Inside delete reject")
                    populateFacilityValuesForMrktExtension(node);

                }
            } else {
                logger.info("-In Out of IF-");

                //***US : 3948-> Implementation Started*****//
                if (inputUserId == null) {
                    user_group = "Stibo";
                } else {
                    user_group = inputUserId;
                }
                //***US : 3948-> Implementation Ended*****//

                populateFacilityValuesForMrktExtension(node);
                logger.info(user_group + "-_-1user_group1-_-_-_-" + counter);
                node.getWorkflowInstance(workflow).setSimpleVariable("ASSIGNEE_QA", user_group);
                logger.info("-_-1user_group2-_-_-_-" + counter);

                if (node.getWorkflowInstanceByID("NewItemOnboarding") != null) {
                    logger.info("-_-In External Removing the node from W/F.-_-");
                    node.getWorkflowInstanceByID("NewItemOnboarding").delete("Removing Product from Workflow");
                }
            }


            populateStatesOnEntryCreatedOn(node, "GlobalQATempObjOnEntryCreatedOn");

        } else if (((Responsible_Entity.equals("Market")) && (Managed_By.equals("McDonald's")) && (!Managed_By.equals("USA New Product Group"))) || (RevisionFlag == "Yes" && (!Managed_By.equals("USA New Product Group")))) {
            var Assigned_Group;
            logger.info("Inside Market Grid");
            node.getValue("TradeItemStatus").setSimpleValue("Pending Market Approval");
            updatestatus.updateStatusForMarket(node, step, logger, "Pending Market Approval");
            gridStatus = "Market";
            var MarketRef = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension")).toArray();

            if (MarketRef.length > 1) {
                var references = node.getReferences().asSet().iterator();
                var counter = 0;
                while (references.hasNext()) {
                    var reference = references.next();
                    if ((reference.getReferenceType() == "ItemToMarketExtension")) {
                        var status = reference.getValue("MarketExtensionStatus").getSimpleValue();
                        if (status == "Approve") {
                            counter++;
                        }
                    }
                    logger.info("-_-Counter-_-_-_-" + counter);
                }

                logger.info("Exiting While");
                if (counter > 1) {
                    node.getValue("MultiMarketFlag").setSimpleValue("Yes");
                    createTempObjforMarket("ItemToMarketExtension", node, step, logger, lookup); //MDSIM-5383

                }


            } else {
                node.getValue("MultiMarketFlag").setSimpleValue("No");
                var currNode = node.getID();
                var gridselectionstatus = SelectApprovalGrid(node);
                GRID_type = "SIM_ITEM_APPROVAL_GRID";
                var marketExtensionRef = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension");
                var marketExtensionRefObj = node.getReferences(marketExtensionRef);
                var marketName = "";
                for (var i = 0; i < marketExtensionRefObj.size(); i++) {
                    marketName = marketExtensionRefObj.get(i).getTarget().getName();
                }
                /*======MDSIM-5383 Starts======*/
                var marketNameReq = step.getEntityHome().getEntityByID(Market_ID).getName();
                var marketGroup = lookup.getLookupTableValue("SIM_Lookup_Market_To_Grid", marketNameReq);
                var marketGroupID = lookup.getLookupTableValue("SIM_Lookup_Market_To_Country_Code", marketGroup);
                /*======MDSIM-5383 End======*/

                //***US : 3948-> Implementation Started*****//
                if (inputUserId == null) {
                    user_group = marketGroupID + "_" + Category_ID + "_Item"; //MDSIM-5383
                    Assigned_Group = get_SIM_Facility_Approval_GRID_users(marketName, Category, GRID_type, user_group);
                } else {
                    Assigned_Group = inputUserId;
                }
                //***US : 3948-> Implementation Ended*****//				


                logger.info(marketName + "-marketName-" + "-user grp-_-_-_-_-" + user_group);

                node.getWorkflowInstance(workflow).setSimpleVariable("ASSIGNEE_QA", Assigned_Group);
                populateFacilityValuesForMrktExtension(node);
                //Commented by Debajit for bug MDSIM-2521
                /*
                if(node.getWorkflowInstanceByID("NewItemOnboarding") != null)
                {
                	logger.info("-_-In External Removing the node from W/F.-_-");
                	node.getWorkflowInstanceByID("NewItemOnboarding").delete("Removing Product from Workflow");
                }*/
                // MDSIM - 5351 ::: Implementation Started by Sourav Tamli //
                var CheckTheInitiatorWithApprover = CheckInitiatorIDWithApprovers(Assigned_Group, InitiatorID, step);
                if (CheckTheInitiatorWithApprover) {

                    node.getValue("ApproverMatch").setSimpleValue("Yes");

                }
                // MDSIM - 5351 ::: Implementation Ended by Sourav Tamli //

            }

            populateStatesOnEntryCreatedOn(node, "MarketQATempObjOnEntryCreatedOn");


        } else if (Managed_By.equals("USA New Product Group")) {
            var Assigned_Group;
            logger.info("Inside NewProduct Grid");
            node.getValue("TradeItemStatus").setSimpleValue("Pending Market Approval");
            updatestatus.updateStatusForMarket(node, step, logger, "Pending Market Approval");
            gridStatus = "NewProduct";
            var MarketRef = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension")).toArray();
            if (MarketRef.length > 1) {
                var references = node.getReferences().asSet().iterator();
                var counter = 0;
                while (references.hasNext()) {
                    var reference = references.next();
                    if ((reference.getReferenceType() == "ItemToMarketExtension")) {
                        var status = reference.getValue("MarketExtensionStatus").getSimpleValue();
                        if (status == "Approve") {
                            counter++;
                        }
                    }
                    logger.info("-_-Counter-_-_-_-" + counter);
                }
                logger.info("Exiting While");
                if (counter > 1) {
                    node.getValue("MultiMarketFlag").setSimpleValue("Yes");
                    createTempObjforNewProduct("ItemToMarketExtension");
                }
            } else {
                node.getValue("MultiMarketFlag").setSimpleValue("No");
                var currNode = node.getID();
                var gridselectionstatus = SelectApprovalGrid(node);


                GRID_type = "SIM_NEW_PRODUCT_APPROVAL_GRID";
                // user_group = "McD_NewProduct_Approval_Group";
                var marketExtensionRef = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension");
                var marketExtensionRefObj = node.getReferences(marketExtensionRef);
                var marketName = "";
                for (var i = 0; i < marketExtensionRefObj.size(); i++) {
                    marketName = marketExtensionRefObj.get(i).getTarget().getName();
                }

                //***US : 3948-> Implementation Started*****//
                if (inputUserId == null) {
                    user_group = Market_ID + "_" + Category_ID + "_NPRD";
                    Assigned_Group = get_SIM_Facility_Approval_GRID_users(marketName, Category, GRID_type, user_group);
                } else {
                    Assigned_Group = inputUserId;
                }
                //***US : 3948-> Implementation Ended*****//


                logger.info(marketName + "-marketName-" + "-user grp-_-_-_-_-" + user_group);

                node.getWorkflowInstance(workflow).setSimpleVariable("ASSIGNEE_QA", Assigned_Group);
                populateFacilityValuesForMrktExtension(node);

                // MDSIM - 5351 ::: Implementation Started by Sourav Tamli //
                var CheckTheInitiatorWithApprover = CheckInitiatorIDWithApprovers(Assigned_Group, InitiatorID, step);
                if (CheckTheInitiatorWithApprover) {

                    node.getValue("ApproverMatch").setSimpleValue("Yes");

                }
                // MDSIM - 5351 ::: Implementation Ended by Sourav Tamli //

                //Commented by Debajit for bug MDSIM-2521
                /*if(node.getWorkflowInstanceByID("NewItemOnboarding") != null)
                {
                	logger.info("-_-In External Removing the node from W/F.-_-");
                	node.getWorkflowInstanceByID("NewItemOnboarding").delete("Removing Product from Workflow");
                }*/

            }

            populateStatesOnEntryCreatedOn(node, "NewProductTempObjOnEntryCreatedOn");

        }
    }
}

//fetch the SourcingApprovalMkt for the specified Mcdonald Item
function SelectApprovalGrid(tempObj) {

    var SourcingMarket = new java.util.ArrayList();
    var gridselectionstatus = 0;

    var SourcingApprovalMkt = tempObj.getValue("SourcingApprovalMkt").getSimpleValue();

    //Iterate the SourcingApprovalMkt for the available List of markets
    if (null != SourcingApprovalMkt) {
        var SourcingApprovalMktSplit = SourcingApprovalMkt.split(',');
        for (var i = 0; i < SourcingApprovalMktSplit.length; i++) {
            var fetchSourcingApprovalMkt = SourcingApprovalMktSplit[i];
            SourcingMarket.add(fetchSourcingApprovalMkt);
            logger.info("-_-_-SourcingApprovalMkt-_-_-" + fetchSourcingApprovalMkt);
        }
    }

    var marketID;
    var references = tempObj.getReferences().asSet().iterator();
    while (references.hasNext()) {
        var reference = references.next();
        if (reference.getReferenceType() == "ItemToMarketExtension") {
            marketID = reference.getTarget().getID();
            logger.info("-_-_-marketID-_-_-" + marketID);
            if (SourcingMarket.contains(marketID)) {
                gridselectionstatus = 1;
            }
        }
    }
    logger.info(tempObj.getID() + "-gridselectionstatus-" + gridselectionstatus);
    return gridselectionstatus;
}

//function to fetch user from Market Manager 
function get_SIM_Facility_Approval_GRID_users(targetMarketName, Category, GRID_type, user_group) {
    var count = 0;
    var user_flag = 0;
    var Assigne_ID = "";
    var cat = "SIM_" + Category;
    var Assigned_Group;
    // MDSIM - 4666 fix by Sourav Tamli ::  Started //
    if (inputUserId == null) {
        if (Managed_By.equals("USA New Product Group")) {
            Assigned_Group = approvalLib.getApproverFromItemHierarchy(node, step, "NewProductGroup", targetMarketName, Managed_By, lookup);
        } else {
            Assigned_Group = approvalLib.getApproverFromItemHierarchy(node, step, null, targetMarketName, Managed_By, lookup);
        }
        return Assigned_Group;
        // MDSIM - 4666 fix by Sourav Tamli ::  Ended //
    }
    /*if(approvalUser != null){
    	/* var Team_Users = step.getGroupHome().getGroupByID("Approval_Grid_Users").getUsers().toArray();
    	
    	for (var index = 0; index < Team_Users.length; index++) {
    		var splits = approvalUser.split(",");
    		for (var i = 0; i < splits.length; i++) {
    			if (Team_Users[index].getID() == splits[i]) {
    				step.getGroupHome().getGroupByID(user_group).addUser(step.getUserHome().getUserById(Team_Users[index].getID()));
    			}
    		}
    	} 
    	
    }else{//MDSIM-4666 - end
    	var child_ent = step.getEntityHome().getEntityByID(GRID_type).getChildren().toArray();
    	for (var i = 0; i < child_ent.length; i++) {
    		if (targetMarketName == child_ent[i].getName()) {
    			var Market_ID = child_ent[i].getID();
    			Assigne_ID = step.getEntityHome().getEntityByID(Market_ID).getValue(cat).getSimpleValue();
    		}
    	}
    	logger.info("-GRID_type-" + GRID_type + "-Assigne_ID-" + Assigne_ID + "-user_group-" + user_group);
    	var Team_Users = step.getGroupHome().getGroupByID("Approval_Grid_Users").getUsers().toArray();

    	if (Assigne_ID != null) {
    		for (var index = 0; index < Team_Users.length; index++) {
    			var splits = Assigne_ID.split(",");
    			for (var i = 0; i < splits.length; i++) {
    				if (Team_Users[index].getID() == splits[i]) {
    					step.getGroupHome().getGroupByID(user_group).addUser(step.getUserHome().getUserById(Team_Users[index].getID()));
    				}
    			}
    		}

    	}
    }*/

}

//function to fetch user from Global Responsibility User  

function get_Global_Responsibility_Facility_GRID_users(region, Category, GRID_type, user_group, listOfMarkets) {
    var count = 0;
    var user_flag = 0;
    var Assigne_ID = "";
    var cat = "SIM_" + Category;

    // MDSIM - 4666 fix by Sourav Tamli ::  Started //

    if (inputUserId == null) {
        var Assigned_Group = "";
        for (var mar = 0; mar < listOfMarkets.size(); mar++) {
            var marName = listOfMarkets.get(mar);
            Assigned_Group = approvalLib.getApproverFromItemHierarchy(node, step, null, marName, Managed_By, lookup);


            /* if(approvalUser != null){
            	var Team_Users = step.getGroupHome().getGroupByID("Approval_Grid_Users").getUsers().toArray();
            	
            	for (var index = 0; index < Team_Users.length; index++) {
            		var splits = approvalUser.split(",");
            		for (var i = 0; i < splits.length; i++) {
            			if (Team_Users[index].getID() == splits[i]) {
            				step.getGroupHome().getGroupByID(user_group).addUser(step.getUserHome().getUserById(Team_Users[index].getID()));
            			}
            		}
            	}
            } */
        }
        return Assigned_Group;

        // MDSIM - 4666 fix by Sourav Tamli ::  Started //

    } else {
        var child_ent = step.getEntityHome().getEntityByID(GRID_type).getChildren().toArray();
        for (var i = 0; i < child_ent.length; i++) {
            if (region == child_ent[i].getName()) {
                var region_ID = child_ent[i].getID();
                Assigne_ID = step.getEntityHome().getEntityByID(region_ID).getValue(cat).getSimpleValue();

            }
        }
        var Team_Users = step.getGroupHome().getGroupByID("Approval_Grid_Users").getUsers().toArray();
        if (Assigne_ID != null) {
            for (var index = 0; index < Team_Users.length; index++) {

                var splits = Assigne_ID.split(",");
                for (var i = 0; i < splits.length; i++) {
                    log.info(splits[i]);
                    if (Team_Users[index].getID() == splits[i]) {
                        step.getGroupHome().getGroupByID(user_group).addUser(step.getUserHome().getUserById(Team_Users[index].getID()));

                    }
                }
            }
        }
    }

}

//fetch user from External_Category_Manager 

function get_User_for_External_category_managed(Managed_By, Category, GRID_type, user_group) {
    var user_flag = 0;
    var Assigne_ID = "";
    var cat = "SIM_" + Category;
    var ECM = Managed_By + " Category Manager";
    log.info("ECM name" + ECM)
    var child_ent = step.getEntityHome().getEntityByID(GRID_type).getChildren().toArray();


    for (var i = 0; i < child_ent.length; i++) {
        if (ECM == child_ent[i].getName()) {
            var ECM_ID = child_ent[i].getID();

            Assigne_ID = step.getEntityHome().getEntityByID(ECM_ID).getValue(cat).getSimpleValue();
            log.info("ECM_ID" + Assigne_ID);
        }

    }
    var Team_Users = step.getGroupHome().getGroupByID("Approval_Grid_Users").getUsers().toArray();
    if (Assigne_ID != null) {
        for (var index = 0; index < Team_Users.length; index++) {

            var splits = Assigne_ID.split(",");
            for (var i = 0; i < splits.length; i++) {
                log.info(splits[i]);
                if (Team_Users[index].getID() == splits[i]) {
                    if (step.getGroupHome().getGroupByID(user_group) != null)
                        step.getGroupHome().getGroupByID(user_group).addUser(step.getUserHome().getUserById(Team_Users[index].getID()));
                }
            }
        }
    }
}



function createSupplierReferenceForTemp(tempObj) {

    var itemToSupplierRefType = tempObj.getValue("REF_ItemToSupplier").getSimpleValue() + ""; //Quality Change
    var supplierRef = step.getReferenceTypeHome().getReferenceTypeByID(itemToSupplierRefType);
    var supplierRefObj = node.getReferences(supplierRef);

    for (var i = 0; i < supplierRefObj.size(); i++) {
        var supplierID = supplierRefObj.get(i).getTarget().getID();
        var supplierName = supplierRefObj.get(i).getTarget().getName();
        var supplier = step.getEntityHome().getEntityByID(supplierID); //Quality Change
        if (supplier != null) {
            try {
                tempObj.createReference(supplier, itemToSupplierRefType);
            } catch (e) {
                logger.info("Exception while adding ItemToSupplier referene." + e);
            }
        }

    }
}


//This function is used to populate facility metadata from Pack/Case to McDitem.
function populateFacilityValues(tempObj) {
    var ItemToFacilityID;
    var ItemToFacilityRefList = new java.util.ArrayList();
    var references = tempObj.getReferences().asSet().iterator(); //Quality Change
    tempObj.getValue("TradeItemStatus").setSimpleValue("Pending Market Approval");
    var itemToFacilityExtRefType = tempObj.getValue("REF_ItemToFacilityExtension").getSimpleValue() + ""; //Quality Change
    while (references.hasNext()) {
        var reference = references.next();
        if (reference.getReferenceType() == itemToFacilityExtRefType) {
            var product_Category = node.getValue("ProductCategory").getSimpleValue();
            var additionalPartyIdentification = node.getValue("AdditionalPartyIdentification").getSimpleValue();
            reference.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending Market Approval");

            if (null != product_Category) {
                reference.getValue("ProductCategory").setSimpleValue(product_Category);
            }
            if (null != additionalPartyIdentification) {
                reference.getValue("AdditionalPartyIdentification").setSimpleValue(additionalPartyIdentification);
            }
        }
    }
}


function createTempObjforMarket(refType, node, step, logger, lookup) { //MDSIM-5383
    var Assigned_Group = "";
    var TriggerLater = false;
    var ReferenceType = step.getReferenceTypeHome().getReferenceTypeByID(refType);
    if (ReferenceType != null) {
        var ReferenceTypes = node.getReferences(ReferenceType);
        if (ReferenceTypes.size() > 0) {
            /*======MDSIM-5383 Starts======*/
            var marketsList = new java.util.HashSet();
            var marketGroupsArray = getCurrentDate.getMarketGroupingsArray(node, step, logger, lookup);
            /*======MDSIM-5383 End======*/
            for (var i = 0; i < ReferenceTypes.size(); i++) {
                var reference1 = ReferenceTypes.get(i);
                var targetMarketID = reference1.getTarget().getID();
                var targetMarketName = reference1.getTarget().getName();
                /*======MDSIM-5383 Starts======*/
                var marketGroup = lookup.getLookupTableValue("SIM_Lookup_Market_To_Grid", targetMarketName);
                var marketGroupID = lookup.getLookupTableValue("SIM_Lookup_Market_To_Country_Code", marketGroup);
                if (!marketsList.contains(targetMarketID)) {
                    var foundFlag = false;
                    var eligibleMarketGroupReq = new Array();
                    for (var mrkt in marketGroupsArray) {
                        var eligibleMarketGroup = marketGroupsArray[mrkt];
                        eligibleMarketGroupReq = marketGroupsArray[mrkt];
                        var addFlag = false;
                        for (var emrkt in eligibleMarketGroup) {
                            var eligibleMarket = eligibleMarketGroup[emrkt];
                            if (eligibleMarket == targetMarketID) {
                                addFlag = true;
                                foundFlag = true;
                                break;
                            }
                        }
                        if (addFlag) {
                            for (var emrkt1 in eligibleMarketGroup) {
                                marketsList.add(eligibleMarketGroup[emrkt1]);
                            }
                            break;
                        }
                    }
                    /*======MDSIM-5383 End======*/
                    var status = reference1.getValue("MarketExtensionStatus").getSimpleValue();

                    if (status == "Approve") {
                        var tempObj = null;
                        temp = 1;
                        /*======MDSIM-5383 Starts======*/
                        var formattedTempObjects = node.getID() + "_" + marketGroupID + "_" + "Task";
                        /*======MDSIM-5383 End======*/

                        var formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);
                        logger.info(status + "formattedTempObjectsRef" + formattedTempObjectsRef);

                        var nodeTrim = node.getID();
                        var idSplit = nodeTrim.split("_");
                        var nodeTrimVal = "";
                        if (idSplit[idSplit.length - 1] != "Task") {
                            if (idSplit.length == 3 || idSplit.length == 2) {
                                nodeTrimVal = nodeTrim;
                            } else if (idSplit.length == 6) {
                                nodeTrimVal = idSplit[0] + "_" + idSplit[1] + "_" + idSplit[2];
                            } else if (idSplit.length == 5) {
                                nodeTrimVal = idSplit[0] + "_" + idSplit[1];
                            }
                        } else if (idSplit[idSplit.length - 1] == "Task") {
                            for (var s = 0; s < idSplit.length - 2; s++) {
                                if (s == idSplit.length - 3) {
                                    nodeTrimVal = nodeTrimVal + idSplit[s];
                                } else {
                                    nodeTrimVal = nodeTrimVal + idSplit[s] + "_";
                                }
                            }
                        }
                        logger.info("-nodeTrim-" + nodeTrimVal);
                        nodeTrim = nodeTrimVal;
                        /*======MDSIM-5383 Starts======*/
                        var formattedTempObjectsVal = nodeTrim + "_" + marketGroupID + "_" + "Task";
                        /*======MDSIM-5383 End======*/
                        var formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);

                        if (formattedTempObjectsRef == null) {
                            /*======MDSIM-5383 Starts======*/
                            if (foundFlag) {
                                formattedTempObjects = node.getID() + "_" + marketGroupID + "_" + "Task";
                            } else {
                                marketsList.add(targetMarketID);
                            }
                            /*======MDSIM-5383 End======*/
                            tempObj = step.getProductHome().getProductByID("McDonaldItemTemporaryObjects").createProduct(formattedTempObjects, "McDTargetMarketTempObject");
                            /*======MDSIM-5270======*/
                            var createdByValue = step.getCurrentUser().getID();
                            tempObj.getValue("CreatedBy").setSimpleValue(createdByValue);
                            /*======MDSIM-5270======*/
                            logger.info("Temp Obj-_-_->" + tempObj);
                        } else {
                            formattedTempObjects = formattedTempObjectsVal + "_" + Math.floor((Math.random() * 10000) + 1);
                            formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);

                            logger.info("before formattedTempObjects-" + formattedTempObjects);
                            while (formattedTempObjectsRef != null) {
                                logger.info("In While1");
                                formattedTempObjects = formattedTempObjectsVal + "_" + Math.floor((Math.random() * 10000) + 1);
                                formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);
                            }
                            logger.info("OutWhile" + formattedTempObjects);
                            if (formattedTempObjectsRef == null && tempObj == null) {
                                /*======MDSIM-5383 Starts======*/
                                if (foundFlag) {
                                    formattedTempObjects = node.getID() + "_" + marketGroupID + "_" + "Task";
                                } else {
                                    marketsList.add(targetMarketID);
                                }
                                /*======MDSIM-5383 End======*/
                                tempObj = step.getProductHome().getProductByID("McDonaldItemTemporaryObjects").createProduct(formattedTempObjects, "McDTargetMarketTempObject");
                                /*======MDSIM-5270======*/
                                var createdByValue = step.getCurrentUser().getID();
                                tempObj.getValue("CreatedBy").setSimpleValue(createdByValue);
                                /*======MDSIM-5270======*/
                            }
                            logger.info("-tempObj-" + tempObj);
                        }

                        copyAttributesLib.copyAttributes(node, formattedTempObjects, step);
                        var itemToFacilityExtRefType = node.getValue("REF_ItemToFacilityExtension").getSimpleValue() + ""; //Quality Change
                        createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, itemToFacilityExtRefType);
                        createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "PackCaseToAI");
                        createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "TempItemToPack");
                        createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "TempObjectToMcD");
                        createSupplierReferenceForTemp(tempObj);
                        /*======MDSIM-5383 Starts======*/
                        if (eligibleMarketGroupReq.length > 0 && foundFlag == true) {
                            for (var m in eligibleMarketGroupReq) {
                                var mrktName = step.getEntityHome().getEntityByID(eligibleMarketGroupReq[m]).getName();
                                createfacilityReferenceLib.createfacilityReferenceformrkt(node, step, logger, tempObj, "ItemToMarketExtension", mrktName);
                                createfacilityReferenceLib.createfacilityReferenceformrkt(node, step, logger, tempObj, "ItemToMarketCategory", mrktName);
                            }
                        } else {
                            createfacilityReferenceLib.createfacilityReferenceformrkt(node, step, logger, tempObj, "ItemToMarketExtension", targetMarketName);
                            createfacilityReferenceLib.createfacilityReferenceformrkt(node, step, logger, tempObj, "ItemToMarketCategory", targetMarketName);
                        }
                        /*======MDSIM-5383 End======*/
                        populateFacilityValuesForMrktExtension(tempObj);

                        //Grid Sourcing or facility Selection.
                        logger.info("-calling SelectApprovalGrid-" + tempObj.getID());
                        var gridselectionstatus = SelectApprovalGrid(tempObj);



                        //***US : 3948-> Implementation Started*****//
                        if (inputUserId == null) {
                            if (eligibleMarketGroupReq.length > 0) {
                                for (var m in eligibleMarketGroupReq) {
                                    var mrktName = step.getEntityHome().getEntityByID(eligibleMarketGroupReq[m]).getName();
                                    Assigned_Group = get_SIM_Facility_Approval_GRID_users(mrktName, Category, GRID_type, user_group);

                                }
                            } else {
                                Assigned_Group = get_SIM_Facility_Approval_GRID_users(targetMarketName, Category, GRID_type, user_group);
                            }
                            /*======MDSIM-5383 End======*/
                        } else {

                            if (Managed_By.equals("USA New Product Group")) {
                                //GRID_type = "SIM_NEW_PRODUCT_APPROVAL_GRID";
                                Assigned_Group = inputUserId;
                            } else {
                                //GRID_type = "SIM_ITEM_APPROVAL_GRID";
                                Assigned_Group = inputUserId;
                            }


                        }
                        //***US : 3948-> Implementation Ended*****//



                        tempObj.getValue("TempGlobalMarket").setSimpleValue("Market");
                        tempObj.getValue("TradeItemStatus").setSimpleValue("Pending Market Approval");
                        tempObj.getValue("ITEMTEMPASSIGNEE").setSimpleValue(Assigned_Group);
                        tempObj.getValue("ITEMTEMPASSIGNEE").setSimpleValue(Assigned_Group);

                        // MDSIM - 5351 ::: Implementation Started by Sourav Tamli //
                        var CheckTheInitiatorWithApprover = CheckInitiatorIDWithApprovers(Assigned_Group, InitiatorID, step);
                        if (CheckTheInitiatorWithApprover) {

                            tempObj.getValue("ApproverMatch").setSimpleValue("Yes");
                            TriggerLater = true;

                        }
                        // MDSIM - 5351 ::: Implementation Ended by Sourav Tamli //

                        if ((!tempObj.isInWorkflow("NewItemOnboarding")) && (TriggerLater == false)) {


                            step.getWorkflowHome().getWorkflowByID("NewItemOnboarding").start(tempObj, "workflow triggered sucessfully");


                        } else if (TriggerLater) {

                            node.getValue("TriggerPending").addValue(tempObj.getID());

                        }
                    } else if (status == "Reject") {
                        logger.info("-_-_-_-_-_-Inside Reject If-_-_-");
                        populateFacilityValuesForMrktExtension(node);
                    }
                }
            }

        }
    }

    logger.info("-_-_-_-_-_-Exit While Loop For createTempObjforMarket Function -_-_-");
}


function createTempObjforNewProduct(refType) {
    var Assigned_Group;
    var TriggerLater = false;
    var ReferenceType = step.getReferenceTypeHome().getReferenceTypeByID(refType);
    if (ReferenceType != null) {
        var ReferenceTypes = node.getReferences(ReferenceType);
        if (ReferenceTypes.size() > 0) {

            for (var i = 0; i < ReferenceTypes.size(); i++) {
                var reference1 = ReferenceTypes.get(i);
                var targetMarketID = reference1.getTarget().getID();
                var targetMarketName = reference1.getTarget().getName();

                var status = reference1.getValue("MarketExtensionStatus").getSimpleValue();

                if (status == "Approve") {
                    var tempObj = null;
                    temp = 1;
                    var formattedTempObjects = node.getID() + "_" + targetMarketID + "_" + "Task";

                    var formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);
                    logger.info(status + "formattedTempObjectsRef" + formattedTempObjectsRef);

                    var nodeTrim = node.getID();
                    var idSplit = nodeTrim.split("_");
                    var nodeTrimVal = "";
                    if (idSplit[idSplit.length - 1] != "Task") {
                        if (idSplit.length == 3 || idSplit.length == 2) {
                            nodeTrimVal = nodeTrim;
                        } else if (idSplit.length == 6) {
                            nodeTrimVal = idSplit[0] + "_" + idSplit[1] + "_" + idSplit[2];
                        } else if (idSplit.length == 5) {
                            nodeTrimVal = idSplit[0] + "_" + idSplit[1];
                        }
                    } else if (idSplit[idSplit.length - 1] == "Task") {
                        for (var s = 0; s < idSplit.length - 2; s++) {
                            if (s == idSplit.length - 3) {
                                nodeTrimVal = nodeTrimVal + idSplit[s];
                            } else {
                                nodeTrimVal = nodeTrimVal + idSplit[s] + "_";
                            }
                        }
                    }
                    logger.info("-nodeTrim-" + nodeTrimVal);
                    nodeTrim = nodeTrimVal;

                    var formattedTempObjectsVal = nodeTrim + "_" + targetMarketID + "_" + "Task";
                    var formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);

                    if (formattedTempObjectsRef == null) {
                        tempObj = step.getProductHome().getProductByID("McDonaldItemTemporaryObjects").createProduct(formattedTempObjects, "McDTargetMarketTempObject");
                        /*======MDSIM-5270======*/
                        var createdByValue = step.getCurrentUser().getID();
                        tempObj.getValue("CreatedBy").setSimpleValue(createdByValue);
                        /*======MDSIM-5270======*/
                        logger.info("Temp Obj-_-_->" + tempObj);
                    } else {
                        formattedTempObjects = formattedTempObjectsVal + "_" + Math.floor((Math.random() * 10000) + 1);
                        formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);

                        logger.info("before formattedTempObjects-" + formattedTempObjects);
                        while (formattedTempObjectsRef != null) {
                            logger.info("In While1");
                            formattedTempObjects = formattedTempObjectsVal + "_" + Math.floor((Math.random() * 10000) + 1);
                            formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);
                        }
                        logger.info("OutWhile" + formattedTempObjects);
                        if (formattedTempObjectsRef == null && tempObj == null) {
                            tempObj = step.getProductHome().getProductByID("McDonaldItemTemporaryObjects").createProduct(formattedTempObjects, "McDTargetMarketTempObject");
                            /*======MDSIM-5270======*/
                            var createdByValue = step.getCurrentUser().getID();
                            tempObj.getValue("CreatedBy").setSimpleValue(createdByValue);
                            /*======MDSIM-5270======*/
                        }
                        logger.info("-tempObj-" + tempObj);
                    }
                    copyAttributesLib.copyAttributes(node, formattedTempObjects, step);
                    var itemToFacilityExtRefType = node.getValue("REF_ItemToFacilityExtension").getSimpleValue() + ""; //Quality Change
                    createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, itemToFacilityExtRefType);
                    createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "PackCaseToAI");
                    createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "TempItemToPack");
                    createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "TempObjectToMcD");
                    createSupplierReferenceForTemp(tempObj);
                    createfacilityReferenceLib.createfacilityReferenceformrkt(node, step, logger, tempObj, "ItemToMarketExtension", targetMarketName);
                    createfacilityReferenceLib.createfacilityReferenceformrkt(node, step, logger, tempObj, "ItemToMarketCategory", targetMarketName);
                    populateFacilityValuesForMrktExtension(tempObj);

                    //Grid Sourcing or facility Selection.
                    logger.info("-calling SelectApprovalGrid-" + tempObj.getID());
                    var gridselectionstatus = SelectApprovalGrid(tempObj);

                    //***US : 3948-> Implementation Started*****//
                    if (inputUserId == null) {
                        if (Managed_By.equals("USA New Product Group")) {
                            GRID_type = "SIM_NEW_PRODUCT_APPROVAL_GRID";
                            user_group = targetMarketID + "_" + Category_ID + "_NPRD";
                        }
                        Assigned_Group = get_SIM_Facility_Approval_GRID_users(targetMarketName, Category, GRID_type, user_group);
                    } else {
                        if (Managed_By.equals("USA New Product Group")) {
                            GRID_type = "SIM_NEW_PRODUCT_APPROVAL_GRID";
                            Assigned_Group = inputUserId;
                        }
                    }
                    //***US : 3948-> Implementation Ended*****//
                    //Commented by Sourav Tamli-_-_-> Same mail triggers from NewProduct onEntry
                    //sendEmailtoSelectiveMarketUsers(targetMarketName, Category, GRID_type, user_group);
                    tempObj.getValue("TempGlobalMarket").setSimpleValue("NewProduct");
                    tempObj.getValue("TradeItemStatus").setSimpleValue("Pending Market Approval");
                    tempObj.getValue("ITEMTEMPASSIGNEE").setSimpleValue(Assigned_Group);
                    // MDSIM - 5351 ::: Implementation Started by Sourav Tamli //
                    var CheckTheInitiatorWithApprover = CheckInitiatorIDWithApprovers(Assigned_Group, InitiatorID, step);
                    if (CheckTheInitiatorWithApprover) {

                        tempObj.getValue("ApproverMatch").setSimpleValue("Yes");
                        TriggerLater = true;

                    }
                    // MDSIM - 5351 ::: Implementation Ended by Sourav Tamli //
                    if ((!tempObj.isInWorkflow("NewItemOnboarding")) && (TriggerLater == false)) {
                        step.getWorkflowHome().getWorkflowByID("NewItemOnboarding").start(tempObj, "workflow triggered sucessfully");

                    } else if (TriggerLater) {

                        node.getValue("TriggerPending").addValue(tempObj.getID());

                    }
                } else if (status == "Reject") {
                    logger.info("-_-_-_-_-_-Inside Reject If-_-_-");
                    populateFacilityValuesForMrktExtension(node);
                }
            }

        }
    }
    logger.info("-_-_-_-_-_-Exit While Loop For createTempObjforNewProduct Function -_-_-");
}



function createTempObjforGlobal() {
    logger.info("createTempObjforGlobal");
    var references = node.getReferences().asSet().iterator();
    var APMEARegionList = new java.util.ArrayList();
    var EuropeRegionList = new java.util.ArrayList();
    var NARegionList = new java.util.ArrayList();
    var SARegionList = new java.util.ArrayList();

    var MultiRegionList = new java.util.ArrayList();

    var APMEARegionTemp;
    var EuropeRegionTemp;
    var NARegionTemp;
    var SARegionTemp;

    var market;
    var regionByMarket;
    var numOfMrkts = 0;

    while (references.hasNext()) {
        var reference = references.next()
        if (reference.getReferenceType() == "ItemToMarketExtension") {
            market = reference.getTarget().getName();
            var status = reference.getValue("MarketExtensionStatus").getSimpleValue();
            if (status == "Approve") {
                regionByMarket = get_region(market);
                if (regionByMarket == "APMEA") {
                    APMEARegionList.add(market);
                } else if (regionByMarket == "Europe") {
                    EuropeRegionList.add(market);
                } else if (regionByMarket == "North America") {
                    NARegionList.add(market);
                } else if (regionByMarket == "South America") {
                    SARegionList.add(market);
                }
                numOfMrkts++;
            }
        }
    }

    if (APMEARegionList.size() > 0) {
        MultiRegionList.add("1");
    }
    if (EuropeRegionList.size() > 0) {
        MultiRegionList.add("2");
    }
    if (NARegionList.size() > 0) {
        MultiRegionList.add("3");
    }
    if (SARegionList.size() > 0) {
        MultiRegionList.add("4");
    }

    if (numOfMrkts > 1) {
        node.getValue("MultiMarketFlag").setSimpleValue("Yes");
    } else {
        node.getValue("MultiMarketFlag").setSimpleValue("No");
    }

    if (MultiRegionList.size() == 1) {
        tempCreation = false;
    } else if (MultiRegionList.size() > 1) {
        if (APMEARegionList.size() > 0) {
            createTempObj("APMEA", Category_ID, APMEARegionList); //MDSIM-4666 : added market list as parameter 
        }
        if (EuropeRegionList.size() > 0) {
            createTempObj("Europe", Category_ID, EuropeRegionList); //MDSIM-4666 : added market list as parameter
        }
        if (NARegionList.size() > 0) {
            createTempObj("North America", Category_ID, NARegionList); //MDSIM-4666 : added market list as parameter
        }
        if (SARegionList.size() > 0) {
            createTempObj("South America", Category_ID, SARegionList); //MDSIM-4666 : added market list as parameter
        }
    }

}


function get_region(market) {
    var region = step.getListOfValuesHome().getListOfValuesByID("SIM_Market_Region").getListOfValuesValueByID(market).getValue();
    return region;
}


function createTempObj(region, Category_ID, listOfMarkets) {
    logger.info("createTempObjforGlobal-_-region and category");
    var TriggerLater = false;
    var tempObj = null;
    var Assigned_Group = "";

    var ReferenceType = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension");
    if (ReferenceType != null) {

        var ReferenceTypes = node.getReferences(ReferenceType);
        if (ReferenceTypes.size() > 0) {

            //for (var i = 0; i < ReferenceTypes.size(); i++)
            //{
            //var reference = ReferenceTypes.get(i);
            //var status = reference.getValue("MarketExtensionStatus").getSimpleValue();
            //if (status == "Approve")
            //{
            var formattedTempObjects = node.getID() + "_" + region + "_" + "Task";
            var formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);
            var nodeTrim = node.getID();
            var idSplit = nodeTrim.split("_");
            var nodeTrimVal = "";
            if (idSplit[idSplit.length - 1] != "Task") {
                if (idSplit.length == 3 || idSplit.length == 2) {
                    nodeTrimVal = nodeTrim;
                } else if (idSplit.length == 6) {
                    nodeTrimVal = idSplit[0] + "_" + idSplit[1] + "_" + idSplit[2];
                } else if (idSplit.length == 5) {
                    nodeTrimVal = idSplit[0] + "_" + idSplit[1];
                }
            } else if (idSplit[idSplit.length - 1] == "Task") {
                for (var s = 0; s < idSplit.length - 2; s++) {
                    if (s == idSplit.length - 3) {
                        nodeTrimVal = nodeTrimVal + idSplit[s];
                    } else {
                        nodeTrimVal = nodeTrimVal + idSplit[s] + "_";
                    }
                }
            }
            logger.info("-nodeTrim-" + nodeTrimVal);
            nodeTrim = nodeTrimVal;

            var formattedTempObjectsVal = nodeTrim + "_" + region + "_" + "Task";
            var formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);

            if (formattedTempObjectsRef == null) {
                tempObj = step.getProductHome().getProductByID("McDonaldItemTemporaryObjects").createProduct(formattedTempObjects, "McDTargetMarketTempObject");
                /*======MDSIM-5270======*/
                var createdByValue = step.getCurrentUser().getID();
                tempObj.getValue("CreatedBy").setSimpleValue(createdByValue);
                /*======MDSIM-5270======*/
            } else {
                formattedTempObjects = formattedTempObjectsVal + "_" + Math.floor((Math.random() * 10000) + 1);
                formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);

                logger.info("before formattedTempObjects-" + formattedTempObjects);
                while (formattedTempObjectsRef != null) {
                    logger.info("In While1");
                    formattedTempObjects = formattedTempObjectsVal + "_" + Math.floor((Math.random() * 10000) + 1);
                    formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);
                }
                logger.info("OutWhile" + formattedTempObjects);
                if (formattedTempObjectsRef == null && tempObj == null) {
                    tempObj = step.getProductHome().getProductByID("McDonaldItemTemporaryObjects").createProduct(formattedTempObjects, "McDTargetMarketTempObject");
                    /*======MDSIM-5270======*/
                    var createdByValue = step.getCurrentUser().getID();
                    tempObj.getValue("CreatedBy").setSimpleValue(createdByValue);
                    /*======MDSIM-5270======*/
                    tempObj.getValue("MultiMarketFlag").setSimpleValue("Yes"); //1013				
                }
                logger.info("-tempObj-" + tempObj);
            }

            copyAttributesLib.copyAttributes(node, formattedTempObjects, step);
            //Quality Change - start
            var itemFacilityExtRefType = node.getValue("REF_ItemToFacilityExtension").getSimpleValue() + "";
            createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, itemFacilityExtRefType);
            //Quality Change - end
            createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "PackCaseToAI");
            createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "TempItemToPack");
            createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "TempObjectToMcD");
            createSupplierReferenceForTemp(tempObj);
            populateFacilityValuesForMrktExtension(tempObj);
            createfacilityReferenceLib.createfacilityReference(node, step, logger, tempObj, "ItemToMarketExtension", region);
            createfacilityReferenceLib.createfacilityReferenceformrkt(node, step, logger, tempObj, "ItemToMarketCategory", region);
            //Updated GRID_Type to SIM_ITEM_GLOBAL_APPROVAL_GRID by Debajit (Defect MDSIM-1626)


            //***US : 3948-> Implementation Started*****//
            if (inputUserId == null) {
                //GRID_type = "SIM_ITEM_GLOBAL_APPROVAL_GRID";
                //user_group = region + "_" + Category_ID + "_Item";
                Assigned_Group = get_Global_Responsibility_Facility_GRID_users(region, Category, GRID_type, user_group, listOfMarkets); //MDSIM-4666 : added market list as parameter
            } else {
                //GRID_type = "SIM_ITEM_GLOBAL_APPROVAL_GRID";
                user_group = Assigned_Group;

            }
            //***US : 3948-> Implementation eNDED*****//

            tempObj.getValue("ITEMTEMPASSIGNEE").setSimpleValue(Assigned_Group);
            tempObj.getValue("TempGlobalMarket").setSimpleValue("Global");
            tempObj.getValue("TradeItemStatus").setSimpleValue("Pending Global Approval");

            // MDSIM - 5351 ::: Implementation Started by Sourav Tamli //
            var CheckTheInitiatorWithApprover = CheckInitiatorIDWithApprovers(Assigned_Group, InitiatorID, step);
            if (CheckTheInitiatorWithApprover) {

                tempObj.getValue("ApproverMatch").setSimpleValue("Yes");
                TriggerLater = true;

            }
            // MDSIM - 5351 ::: Implementation Ended by Sourav Tamli //

            if ((!tempObj.isInWorkflow("NewItemOnboarding")) && (TriggerLater == false)) {
                step.getWorkflowHome().getWorkflowByID("NewItemOnboarding").start(tempObj, "workflow triggered sucessfully");
            } else if (TriggerLater) {

                node.getValue("TriggerPending").addValue(tempObj.getID());

            }
            //}
            //}
        }
    }
}


function populateFacilityValuesForMrktExtension(tempObj) {
	
    var Responsible_Entity_check = node.getValue("ItemResponsibleEntity").getSimpleValue();
    var references1 = node.getReferences().asSet().iterator();
    while (references1.hasNext()) {
        var reference1 = references1.next();
        if ((reference1.getReferenceType() == "ItemToMarketExtension")) {
            var facilityref = reference1.getTarget().getID();
            var facilityrefID = step.getEntityHome().getEntityByID(facilityref);
            var status = reference1.getValue("MarketExtensionStatus").getSimpleValue();
			//MDSIM-7887-start
			
			var vendorDirect = reference1.getValue("IsVendorDirect").getSimpleValue();
			
			//MDSIM-7887-end
            var references = node.getReferences().asSet().iterator();
            var temp = 0;
            while (references.hasNext()) {
                var reference = references.next();
                if (reference.getReferenceType() == "ItemToMarketCategory") {
                    logger.info("facilityref-_->" + facilityref);
					
                    try {
                        var check = reference.getTarget().getID();
                        var checkID = step.getEntityHome().getEntityByID(facilityref);
						
                        if (check != facilityref) {
                            var ItemToMarketCategoryRef = node.createReference(facilityrefID, "ItemToMarketCategory");						
							
							
                            if (status == "Approve") {
                                if (!Managed_By.equals("USA New Product Group")) {
                                    ItemToMarketCategoryRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending " + gridStatus + " Approval");
                                } else {
                                    ItemToMarketCategoryRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending Market Approval");
                                }

                            } else if (status == "Reject") {
                                ItemToMarketCategoryRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Rejected");
                            } else if (status == "Pending Facility Approval") {
                                ItemToMarketCategoryRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending Facility Approval");
                            }
							
							//MDSIM-7887-start
							if(null != vendorDirect){
								ItemToMarketCategoryRef.getValue("IsVendorDirect").setSimpleValue(vendorDirect);
							}
							//MDSIM-7887-end
							
                        } else {
							ItemToMarketCategoryRef = reference;
                            if (status == "Approve") {
                                if (!Managed_By.equals("USA New Product Group")) {
                                    ItemToMarketCategoryRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending " + gridStatus + " Approval");
                                } else {
                                    ItemToMarketCategoryRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending Market Approval");
                                }

                            } else if (status == "Reject") {
                                reference.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Rejected");
                                populatereferencesforItem(node);
                            } else if (status == "Pending Facility Approval") {
                                ItemToMarketCategoryRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending Facility Approval");
                            }
							
							//MDSIM-7887-start
							if(null != vendorDirect){
								reference.getValue("IsVendorDirect").setSimpleValue(vendorDirect);
							}
							//MDSIM-7887-end
                        }
						
						
					
                    } catch (e) {
                        logger.info("ExceptionInMarket is:-_-_-_-_-_->" + e);
						
                    }
					
                }
            }
        }

        //Quality Change - start
        var itemFacilityExtRefType = node.getValue("REF_ItemToFacilityExtension").getSimpleValue() + "";
        if ((reference1.getReferenceType() == itemFacilityExtRefType)) {
            var facilityref = reference1.getTarget().getID();
            var facilityrefID = step.getEntityHome().getEntityByID(facilityref);
            //Quality Change - end
            var Market_Status = reference1.getValue("FacilityApprovedCategory_Market_Status").getSimpleValue();
            var FacilityType = reference1.getValue("FacilityType").getSimpleValue();
            var IsShipPoint = reference1.getValue("IsShipPoint").getSimpleValue();
            var ItemShippedFacility = reference1.getValue("ItemShippedFacility").getSimpleValue();
            var ItemManufacturingPoint = reference1.getValue("ItemManufacturingPoint").getSimpleValue();
            var WSI = reference1.getValue("AdditionalPartyIdentification").getSimpleValue();
            var GLN = reference1.getValue("GLN").getSimpleValue();
            var customFacilityID = reference1.getValue("SIM_Identifier").getSimpleValue(); // fetching custom Facility ID to TempObj (US -> MDSIM-3997)
            var ItemRelevantMarketCategory = reference1.getValue("ItemRelevantMarketCategory").getSimpleValue(); // added by Sourav Tamli for MDSIM - 2618 //
            SupplierID = reference1.getValue("SupplierID").getSimpleValue();
            SupplierName = reference1.getValue("SupplierName").getSimpleValue();

            var references = node.getReferences().asSet().iterator();
            var temp = 0;
            //Quality Change - start
            var itemFacilityRefType = node.getValue("REF_ItemToFacility").getSimpleValue() + "";
            //Quality Change - end
            while (references.hasNext()) {
                var reference = references.next();
                if (reference.getReferenceType() == itemFacilityRefType) {
                    try {
                        var check = reference.getTarget().getID();
                        var checkID = step.getEntityHome().getEntityByID(facilityref);
                        if (check == facilityref) {
                            var ItemTofacilityRef = tempObj.createReference(facilityrefID, itemFacilityRefType);
                            logger.info("-_-inside itemToFacility-_-");
                            ItemTofacilityRef.getValue("SIM_Identifier").setSimpleValue(customFacilityID); // setting custom Facility ID to TempObj (US -> MDSIM-3997)
                            ItemTofacilityRef.getValue("FacilityApprovedCategory_Market_Status").setSimpleValue(Market_Status);
                            ItemTofacilityRef.getValue("FacilityType").setSimpleValue(FacilityType);
                            ItemTofacilityRef.getValue("IsShipPoint").setSimpleValue(IsShipPoint);
                            ItemTofacilityRef.getValue("SupplierID").setSimpleValue(SupplierID);
                            ItemTofacilityRef.getValue("SupplierName").setSimpleValue(SupplierName);
                            ItemTofacilityRef.getValue("ItemManufacturingPoint").setSimpleValue(ItemManufacturingPoint);
                            ItemTofacilityRef.getValue("ItemShippedFacility").setSimpleValue(ItemShippedFacility);
                            ItemTofacilityRef.getValue("ItemRelevantMarketCategory").setSimpleValue(ItemRelevantMarketCategory); // added by Sourav Tamli for MDSIM - 2618 //
                            if (!Managed_By.equals("USA New Product Group")) {
                                ItemTofacilityRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending " + gridStatus + " Approval");
                            } else {
                                ItemTofacilityRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending Market Approval");
                            }
                            ItemTofacilityRef.getValue("AdditionalPartyIdentification").setSimpleValue(WSI);
                            ItemTofacilityRef.getValue("GLN").setSimpleValue(GLN);
                        }
                    } catch (e) {
                        logger.info("Exception is:-_-_-_-_-_->" + e);
                    }
                }
            }
        }
    }

}


function delRejectReference(tempobj) {
    var gridStatus = "";
    var checkMarket = false;
    var checkFlagForHAVI_TMS = false;
    var CheckApprovalGridForHAVI_TMS;
    var status = "";
    var objType = node.getObjectType().getID();
    var currentuser = step.getCurrentUser().getID();
    var currentuserVal = step.getUserHome().getUserById(currentuser);
    var currentuserEmail = currentuser + "(" + currentuserVal.getEMail() + ")";
    var userID = node.getValue("ApprovedByDataTeamUser").setSimpleValue(currentuserEmail);
    /*
		Commented By Jawaid, 2 Semicolons were getting added
		removed the semicolon
		var formattedEmail = node.getValue("ContactEmail").getSimpleValue() + ";"
		*/
    var formattedEmail = node.getValue("ContactEmail").getSimpleValue();
    var ReferenceType = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketCategory");
    var Managed_By = node.getValue("ItemManagedBy").getSimpleValue();
    if (Managed_By == null || productGroupValue == "SER") Managed_By = ""; //MDSIM-5237
    if (ReferenceType != null) {
        var ReferenceTypes = node.getReferences(ReferenceType);
        if (ReferenceTypes.size() > 0) {
            for (var i = 0; i < ReferenceTypes.size(); i++) {
                var reference1 = ReferenceTypes.get(i);
                var facility = reference1.getTarget().getID();
                var references = tempobj.getReferences().asSet().iterator();
                while (references.hasNext()) {
                    var reference = references.next()
                    if ((reference.getReferenceType() == "ItemToMarketExtension")) {
                        var marketid = reference.getTarget().getID();
                        var marketName = reference.getTarget().getName();
                        status = reference.getValue("MarketExtensionStatus").getSimpleValue();
                        if ((status == "Reject" || status == "Pending Facility Approval") && (facility == marketid)) {
                            if (status == "Reject")
                                reference1.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Rejected");
                            else if (status == "Pending Facility Approval")
                                reference1.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending Facility Approval");
                            reference.delete();
                            logger.info(facility + "IF DELETED-_-" + status);
                        } else if ((status == "Approve") && (facility == marketid)) {
                            checkMarket = getMcClementMarkets(marketid, node, step, logger);
                            //checkFlagForHAVI_TMS = validateTMSHVAIProdCtgy(node, step, logger, marketid);

                            if (Managed_By == "McDonald's" || Managed_By == "McClement") {
                                if (((Responsible_Entity.equals("Global")) && (!Managed_By.equals("McDonald's")) && (checkMarket == true)) || ((Responsible_Entity.equals("Market")) && (!Managed_By.equals("McDonald's")) && (checkMarket == true))) {
                                    gridStatus = "External";
                                } else if (((Responsible_Entity.equals("Global")) && (Managed_By.equals("McDonald's"))) || ((Responsible_Entity.equals("Global")) && (!Managed_By.equals("McDonald's")) && (checkMarket == false))) {
                                    gridStatus = "Global";
                                } else if (((Responsible_Entity.equals("Market")) && (Managed_By.equals("McDonald's"))) || ((Responsible_Entity.equals("Market")) && (!Managed_By.equals("McDonald's")) && (checkMarket == false))) {
                                    gridStatus = "Market";
                                }
                            } else if (Managed_By == "TMS" || Managed_By == "HAVI") {
                                CheckApprovalGridForHAVI_TMS = checkApprovalGrid.Check_HAVI_TMS_Approval_GRID(node, step, "XCM", marketName, Managed_By, null, "ONBRD/EXTND");
                                if (((Responsible_Entity.equals("Global")) && (CheckApprovalGridForHAVI_TMS != false)) || ((Responsible_Entity.equals("Market")) && (CheckApprovalGridForHAVI_TMS != false))) {
                                    gridStatus = "External";
                                } else if (((Responsible_Entity.equals("Global")) && (CheckApprovalGridForHAVI_TMS == false))) {
                                    gridStatus = "Global";
                                } else if (((Responsible_Entity.equals("Market")) && (CheckApprovalGridForHAVI_TMS == false))) {
                                    gridStatus = "Market";
                                }
                            } else if (Managed_By == "USA New Product Group") {
                                gridStatus = "Market";
                            }

                            if (productGroupValue == "SER") { //MDSIM-5237
                                reference1.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Active");
                            } else {
                                reference1.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending " + gridStatus + " Approval");
                            }
                        }
                    }
                }
            }
        }
    }
    //Quality Change - start
    var itemFacilityRefType = node.getValue("REF_ItemToFacility").getSimpleValue() + "";
    var facExtensionRef = step.getReferenceTypeHome().getReferenceTypeByID(itemFacilityRefType);
    //Quality Change - end
    var facExtensionRefObj = node.getReferences(facExtensionRef);

    for (var i = 0; i < facExtensionRefObj.size(); i++) {
        var addeddExtension = facExtensionRefObj.get(i).getTarget().getID();
        if (status == "Approve") {
            if (!Managed_By.equals("USA New Product Group")) {

                //MDSIM-5237 - start
                if (productGroupValue == "SER") {
                    facExtensionRefObj.get(i).getValue("SupplierItemMktApprovalStatus").setSimpleValue("Active");
                } else {
                    facExtensionRefObj.get(i).getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending " + gridStatus + " Approval");
                }
                //MDSIM-5237 - end
            } else {
                //MDSIM-5237 - start
                if (productGroupValue == "SER") {
                    facExtensionRefObj.get(i).getValue("SupplierItemMktApprovalStatus").setSimpleValue("Active");
                } else {
                    facExtensionRefObj.get(i).getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending Market Approval");
                }
                //MDSIM-5237 - end
            }
        } else if (status == "Reject") {
            facExtensionRefObj.get(i).getValue("SupplierItemMktApprovalStatus").setSimpleValue("Rejected");
        }
        //facExtensionRefObj.get(i).getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending " + gridStatus + " Approval");
    }
}


function populateMetaDataFromMcDToTemp(node, formattedTempObjectsRef, refType) {

    if (refType == "ItemToMarketExtension") {
        var references = node.getReferences().asSet().iterator();
        while (references.hasNext()) {
            var reference = references.next();
            if (reference.getReferenceType() == refType) {
                market = reference.getTarget().getName();
                marketID = reference.getTarget().getID();
                var status = reference.getValue("SupplierItemMktApprovalStatus").getSimpleValue();

                try {
                    var marketrefID = step.getEntityHome().getEntityByID(marketID);
                    var copiedref = formattedTempObjectsRef.createReference(marketrefID, refType);
                    if (status != null)
                        copiedref.getValue("SupplierItemMktApprovalStatus").setSimpleValue(status);
                    logger.info("-_-_-1-_-1-_-_-");
                } catch (e) {
                    // //logger.info("Exception while adding refrences:-_-_-_-_-_->" );
                }
            }
        }
    }

}

function populatereferencesforItem(node) {

    var nodereferences = node.getReferences().asSet().iterator();
    while (nodereferences.hasNext()) {
        var reference1 = nodereferences.next();
        if (reference1.getReferenceType() == "TempObjToItem") {
            logger.info("-_-4-_-");
            var facilityref = reference1.getTarget().getID();
            var facilityrefID = step.getProductHome().getProductByID(facilityref);
            logger.info(facilityref + "-_-populatereferencesforItem facilityrefID-_-" + facilityrefID);
            populateFacilityMktValuesForItemLib.populateFacilityMktValuesForItem(tempObj, node, step);
            delRejectReference(facilityrefID);
        }
    }
}

function addAI() {

    var references1 = node.getReferences().asSet().iterator();
    while (references1.hasNext()) {
        var reference1 = references1.next();
        if ((reference1.getReferenceType() == "PackCaseToAI")) {
            var assemblyref = reference1.getTarget().getID();
            var assemblyrefID = step.getProductHome().getProductByID(assemblyref);
            logger.info(assemblyref + "Exception is:-_-_-_-_-_->" + assemblyrefID);
            try {
                node.createReference(assemblyrefID, "RawItemToAI");
            } catch (e) {
                logger.info("Exception is:-_-_-_-_-_->" + e);
            }
        }
    }
}

function sendEmailtoSelectiveMarketUsers(targetMarketName, Category, GRID_type, user_group) {

    var Assigne_ID = "";
    var cat = "SIM_" + Category;
    var formattedEmail;

    var child_ent = step.getEntityHome().getEntityByID(GRID_type).getChildren().toArray();
    for (var i = 0; i < child_ent.length; i++) {
        if (targetMarketName == child_ent[i].getName()) {
            var Market_ID = child_ent[i].getID();
            Assigne_ID = step.getEntityHome().getEntityByID(Market_ID).getValue(cat).getSimpleValue();
        }
    }

    logger.info("-GRID_type-" + GRID_type + "-Assigne_ID-" + Assigne_ID + "-user_group-" + user_group);

    if (Assigne_ID != null) {
        var splits = Assigne_ID.split(",");
        for (var i = 0; i < splits.length; i++) {
            var userGroupID = splits[i];
            var userID = step.getUserHome().getUserById(userGroupID);
            if (null != userID) {
                if (null != userID.getEMail())
                    formattedEmail = formattedEmail + userID.getEMail() + ";";
            }

            if (null != formattedEmail) {
                sendEmail.sendRequestSubmissionToMarketQA(node, mailer, formattedEmail, step);
            }
        }
    }
}

function populateStatesOnEntryCreatedOn(node, attributeStateType) {

    var parsedDate = getCurrentDate.getCurrentDateInHHMMSS();

    var ReferenceType = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketCategory");
    if (ReferenceType != null) {
        var ReferenceTypes = node.getReferences(ReferenceType);
        if (ReferenceTypes.size() > 0) {
            for (var i = 0; i < ReferenceTypes.size(); i++) {
                var reference1 = ReferenceTypes.get(i);
                var facility = reference1.getTarget().getID();
                var references = node.getReferences().asSet().iterator();
                while (references.hasNext()) {
                    var reference = references.next()
                    if ((reference.getReferenceType() == "ItemToMarketExtension")) {
                        var marketid = reference.getTarget().getID();
                        var marketName = reference.getTarget().getName();
                        var status = reference.getValue("MarketExtensionStatus").getSimpleValue();
                        if ((status == "Approve") && (facility == marketid)) {
                            reference1.getValue(attributeStateType).setSimpleValue(parsedDate);
                        }
                    }
                }
            }
        }
    }
}

function populateValuesForAutoApproval(node) {

    var Responsible_Entity_check = node.getValue("ItemResponsibleEntity").getSimpleValue();
    var references1 = node.getReferences().asSet().iterator();
    while (references1.hasNext()) {
        var reference1 = references1.next();
        if ((reference1.getReferenceType() == "ItemToMarketExtension")) {
            var facilityref = reference1.getTarget().getID();
            var facilityrefID = step.getEntityHome().getEntityByID(facilityref);
            var status = reference1.getValue("MarketExtensionStatus").getSimpleValue();
			
			//MDSIM-7887-start
			var vendorDirect = reference1.getValue("IsVendorDirect").getSimpleValue();			
			
			//MDSIM-7887-end
			
            var references = node.getReferences().asSet().iterator();
            var temp = 0;
            while (references.hasNext()) {
                var reference = references.next();
                if (reference.getReferenceType() == "ItemToMarketCategory") {

                    try {
                        var check = reference.getTarget().getID();
                        var checkID = step.getEntityHome().getEntityByID(facilityref);
                        if (check == facilityref) {
                            var ItemToMarketCategoryRef = node.createReference(facilityrefID, "ItemToMarketCategory");
                            if (status == "Approve") {
                                ItemToMarketCategoryRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Active");
                            } else if (status == "Reject") {
                                ItemToMarketCategoryRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Rejected");
                            }
							
							//MDSIM-7887:updating the vendor direct flag
														
							ItemToMarketCategoryRef.getValue("IsVendorDirect").setSimpleValue(vendorDirect);
							
							//MDSIM-7887:end

                        }

                    } catch (e) {
                        //logger.info("Exception is:-_-_-_-_-_->" + e);
                    }
                }
            }
        }
        //Quality Change - start
        var itemFacilityExtRefType = node.getValue("REF_ItemToFacilityExtension").getSimpleValue() + "";
        var itemFacilityRefType = node.getValue("REF_ItemToFacility").getSimpleValue() + "";

        if ((reference1.getReferenceType() == itemFacilityExtRefType)) {
            var facilityref = reference1.getTarget().getID();
            var facilityrefID = step.getEntityHome().getEntityByID(facilityref);
            //Quality Change - end
            var Market_Status = reference1.getValue("FacilityApprovedCategory_Market_Status").getSimpleValue();
            var FacilityType = reference1.getValue("FacilityType").getSimpleValue();
            var IsShipPoint = reference1.getValue("IsShipPoint").getSimpleValue();
            var ItemShippedFacility = reference1.getValue("ItemShippedFacility").getSimpleValue();
            var ItemManufacturingPoint = reference1.getValue("ItemManufacturingPoint").getSimpleValue();
            var WSI = reference1.getValue("AdditionalPartyIdentification").getSimpleValue();
            var GLN = reference1.getValue("GLN").getSimpleValue();
            var ItemRelevantMarketCategory = reference1.getValue("ItemRelevantMarketCategory").getSimpleValue(); // Added by Sourav Tamli for MDSIM - 2618 //
            SupplierID = reference1.getValue("SupplierID").getSimpleValue();
            SupplierName = reference1.getValue("SupplierName").getSimpleValue();

            var references = node.getReferences().asSet().iterator();
            var temp = 0;
            while (references.hasNext()) {
                var reference = references.next();
                if (reference.getReferenceType() == itemFacilityRefType) {
                    try {
                        var check = reference.getTarget().getID();
                        var checkID = step.getEntityHome().getEntityByID(facilityref);
                        if (check == facilityref) {
                            var ItemTofacilityRef = node.createReference(facilityrefID, itemFacilityRefType);

                            ItemTofacilityRef.getValue("FacilityApprovedCategory_Market_Status").setSimpleValue(Market_Status);
                            ItemTofacilityRef.getValue("FacilityType").setSimpleValue(FacilityType);
                            ItemTofacilityRef.getValue("IsShipPoint").setSimpleValue(IsShipPoint);
                            ItemTofacilityRef.getValue("SupplierID").setSimpleValue(SupplierID);
                            ItemTofacilityRef.getValue("SupplierName").setSimpleValue(SupplierName);
                            ItemTofacilityRef.getValue("ItemManufacturingPoint").setSimpleValue(ItemManufacturingPoint);
                            ItemTofacilityRef.getValue("ItemShippedFacility").setSimpleValue(ItemShippedFacility);
                            ItemTofacilityRef.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Active");
                            ItemTofacilityRef.getValue("AdditionalPartyIdentification").setSimpleValue(WSI);
                            ItemTofacilityRef.getValue("GLN").setSimpleValue(GLN);
                            ItemTofacilityRef.getValue("ItemRelevantMarketCategory").setSimpleValue(ItemRelevantMarketCategory); // Added by Sourav Tamli for MDSIM - 2618 //

                        }
                    } catch (e) {
                        //logger.info("Exception is:-_-_-_-_-_->" + e);
                    }
                }
            }
        }
    }

}


function generateEmailForRejection(node, step, mailer, logger, formattedEmail, currentState, market) {
    var ReqNum = node.getValue("RequestNumber").getSimpleValue();
    var EnvType = node.getValue("EnvType").getSimpleValue();
    var SupplierNotification = node.getValue("SupplierNotification").getSimpleValue();
    var subject = "**********  Item Rejection ***************";
    var supplierEmailID = suppEmail.getItemToSupplierEmailID(node, step, logger);
    var tempformatemail = formattedEmail;
    //logger.info("-tempformatemail-"+tempformatemail);

    if (supplierEmailID != null) {
        //logger.info("-formattedEmail Start-"+formattedEmail);
        formattedEmail = formattedEmail + ";" + supplierEmailID;
        logger.info("-formattedEmail Bef-" + formattedEmail);
        /*
        var formattedEmailSplit = formattedEmail.split(";;");
        if(formattedEmailSplit.length>1)
        {
        	//logger.info("-formattedEmail Yes-"+formattedEmail);
        	formattedEmail = tempformatemail+supplierEmailID;
        }*/
    }
    logger.info("-formattedEmail Aft-" + formattedEmail);
    var body = "\n During item review process for item " + ReqNum + "  Market " + market + " has been Rejected by : " + currentState +
        "\n\n *** THIS IS A " + EnvType + " SYSTEM GENERATED EMAIL. PLEASE DO NOT REPLY. ***";

    formattedEmail = filter.filterOutEmailAddress(step, formattedEmail); //To Prevent sending mail to Business user from lower environment
    if (SupplierNotification == "true") {
        mailer.mail().addTo(formattedEmail).from("noreply@mcdonalds.com").subject(subject).plainMessage(body).send();
    }
}

function createTempObjforXCM(refType) {
    var Assigned_Group;
    var TriggerLater = false;
    var FlagCheckForXCMRouting = false;
    var checkProdCatgy = false;
    var CheckApprovalGridForHAVI_TMS = "";
    var marketCheckForMcClement = false;
    var ReferenceType = step.getReferenceTypeHome().getReferenceTypeByID(refType);
    if (ReferenceType != null) {
        var ReferenceTypes = node.getReferences(ReferenceType);
        if (ReferenceTypes.size() > 0) {

            for (var i = 0; i < ReferenceTypes.size(); i++) {
                FlagCheckForXCMRouting = false;
                var reference1 = ReferenceTypes.get(i);
                var targetMarketID = reference1.getTarget().getID();
                var targetMarketName = reference1.getTarget().getName();
                var status = reference1.getValue("MarketExtensionStatus").getSimpleValue();
                if (status == "Approve") {
                    if ((Managed_By == "HAVI") || (Managed_By == "TMS")) {
                        //checkProdCatgy = validateTMSHVAIProdCtgy(node, step, logger, targetMarketID);
                        CheckApprovalGridForHAVI_TMS = checkApprovalGrid.Check_HAVI_TMS_Approval_GRID(node, step, "XCM", targetMarketName, Managed_By, null, "ONBRD/EXTND");

                    }
                    var tempObj = null;
                    temp = 1;
                    marketCheckForMcClement = getMcClementMarkets(targetMarketID, node, step, logger);
                    if ((Responsible_Entity.equals("Global")) && (marketCheckForMcClement == false) && (Managed_By == "McClement") && (CheckApprovalGridForHAVI_TMS == false)) {
                        var region = get_region(targetMarketName);
                        var formattedTempObjects = node.getID() + "_" + region + "_" + "Task";

                    } else {
                        var formattedTempObjects = node.getID() + "_" + targetMarketID + "_" + "Task";
                    }

                    var formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);
                    logger.info(status + "formattedTempObjectsRef" + formattedTempObjectsRef);

                    var nodeTrim = node.getID();
                    var idSplit = nodeTrim.split("_");
                    var nodeTrimVal = "";
                    if (idSplit[idSplit.length - 1] != "Task") {
                        if (idSplit.length == 3 || idSplit.length == 2) {
                            nodeTrimVal = nodeTrim;
                        } else if (idSplit.length == 6) {
                            nodeTrimVal = idSplit[0] + "_" + idSplit[1] + "_" + idSplit[2];
                        } else if (idSplit.length == 5) {
                            nodeTrimVal = idSplit[0] + "_" + idSplit[1];
                        }
                    } else if (idSplit[idSplit.length - 1] == "Task") {
                        for (var s = 0; s < idSplit.length - 2; s++) {
                            if (s == idSplit.length - 3) {
                                nodeTrimVal = nodeTrimVal + idSplit[s];
                            } else {
                                nodeTrimVal = nodeTrimVal + idSplit[s] + "_";
                            }
                        }
                    }
                    logger.info("-nodeTrim-" + nodeTrimVal);
                    nodeTrim = nodeTrimVal;

                    var formattedTempObjectsVal = nodeTrim + "_" + targetMarketID + "_" + "Task";
                    var formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);

                    if (formattedTempObjectsRef == null) {
                        tempObj = step.getProductHome().getProductByID("McDonaldItemTemporaryObjects").createProduct(formattedTempObjects, "McDTargetMarketTempObject");
                        /*======MDSIM-5270======*/
                        var createdByValue = step.getCurrentUser().getID();
                        tempObj.getValue("CreatedBy").setSimpleValue(createdByValue);
                        /*======MDSIM-5270======*/
                        logger.info("Temp Obj-_-_->" + tempObj);
                    } else {
                        formattedTempObjects = formattedTempObjectsVal + "_" + Math.floor((Math.random() * 10000) + 1);
                        formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);

                        logger.info("before formattedTempObjects-" + formattedTempObjects);
                        while (formattedTempObjectsRef != null) {
                            logger.info("In While1");
                            formattedTempObjects = formattedTempObjectsVal + "_" + Math.floor((Math.random() * 10000) + 1);
                            formattedTempObjectsRef = step.getProductHome().getProductByID(formattedTempObjects);
                        }
                        logger.info("OutWhile" + formattedTempObjects);
                        if (formattedTempObjectsRef == null && tempObj == null) {
                            tempObj = step.getProductHome().getProductByID("McDonaldItemTemporaryObjects").createProduct(formattedTempObjects, "McDTargetMarketTempObject");
                            /*======MDSIM-5270======*/
                            var createdByValue = step.getCurrentUser().getID();
                            tempObj.getValue("CreatedBy").setSimpleValue(createdByValue);
                            /*======MDSIM-5270======*/
                        }
                        logger.info("-tempObj-" + tempObj);
                    }

                    copyAttributesLib.copyAttributes(node, formattedTempObjects, step);
                    var itemToFacilityExtRefType = node.getValue("REF_ItemToFacilityExtension").getSimpleValue() + ""; //Quality Change
                    createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, itemToFacilityExtRefType);
                    createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "PackCaseToAI");
                    createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "TempItemToPack");
                    createfacilityReferenceLib.createMcdfacilityReference(node, step, logger, tempObj, "TempObjectToMcD");
                    createSupplierReferenceForTemp(tempObj);
                    createfacilityReferenceLib.createfacilityReferenceformrkt(node, step, logger, tempObj, "ItemToMarketExtension", targetMarketName);
                    createfacilityReferenceLib.createfacilityReferenceformrkt(node, step, logger, tempObj, "ItemToMarketCategory", targetMarketName);
                    populateFacilityValuesForMrktExtension(tempObj);
					
					
					//MDSIM-7887-start
					//marketCategory.updateVendorDirectFlag(node,tempObj,step,logger);
					//MDSIM-7887-end

                    //Grid Sourcing or facility Selection.
                    logger.info("-calling SelectApprovalGrid-" + tempObj.getID());
                    var gridselectionstatus = SelectApprovalGrid(tempObj);



                    //***US : 3948-> Implementation Started*****//
                    //user_group = checkApprovalGrid.delegateRequestToApprovalGrid(node, step, logger, targetMarketID, targetMarketName, Category_ID_Code, Category, inputUserId, "1", tempObj, lookup); //MDSIM-4666 added user_group assignment.
                    //***US : 3948-> Implementation Ended*****//

                    //MDSIM - 4666 fix by Sourav Tamli :: Started//
                    var CheckMcClementMarket = step.getListOfValuesHome().getListOfValuesByID("McClementXCMMarkets").getListOfValuesValueByID(targetMarketID);
                    if (CheckMcClementMarket != null && Managed_By == "McClement") {

                        FlagCheckForXCMRouting = true;

                    } else if (Managed_By == "HAVI" || Managed_By == "TMS") {

                        CheckApprovalGridForHAVI_TMS = checkApprovalGrid.Check_HAVI_TMS_Approval_GRID(node, step, "XCM", targetMarketName, Managed_By, null, "ONBRD/EXTND");
                        if (CheckApprovalGridForHAVI_TMS != "DATATEAMUSER" && CheckApprovalGridForHAVI_TMS != "" && CheckApprovalGridForHAVI_TMS != false) {

                            FlagCheckForXCMRouting = true;

                        }

                    }
                    if (FlagCheckForXCMRouting) {
                        //If user group is related TMS/HAVI/McClement comes here
                        if (inputUserId == null) {
                            Assigned_Group = approvalLib.getApproverFromItemHierarchy(node, step, "XCM", targetMarketName, Managed_By, lookup);
                        }

                        tempObj.getValue("TempGlobalMarket").setSimpleValue("External");
                        tempObj.getValue("TradeItemStatus").setSimpleValue("Pending External Approval");
                        tempObj.getValue("ITEMTEMPASSIGNEE").setSimpleValue(Assigned_Group);

                    } else {
                        if (inputUserId == null) {
                            Assigned_Group = approvalLib.getApproverFromItemHierarchy(node, step, null, targetMarketName, Managed_By, lookup);
                        }
                        var AICategory = getAICategory(node);
                        if (AICategory == "GEO" || AICategory == "GBL") {

                            tempObj.getValue("TempGlobalMarket").setSimpleValue("Global");
                            tempObj.getValue("TradeItemStatus").setSimpleValue("Pending Global Approval");
                            tempObj.getValue("ITEMTEMPASSIGNEE").setSimpleValue(Assigned_Group);
                            populateStatesOnEntryCreatedOn(node, "GlobalQATempObjOnEntryCreatedOn");

                        } else if (AICategory == "NON") {

                            tempObj.getValue("TempGlobalMarket").setSimpleValue("Market");
                            tempObj.getValue("TradeItemStatus").setSimpleValue("Pending Market Approval");
                            tempObj.getValue("ITEMTEMPASSIGNEE").setSimpleValue(Assigned_Group);
                            populateStatesOnEntryCreatedOn(node, "MarketQATempObjOnEntryCreatedOn");

                        }

                    }
                    //MDSIM - 4666 fix by Sourav Tamli :: Ended//

                    // MDSIM - 5351 ::: Implementation Started by Sourav Tamli //
                    var CheckTheInitiatorWithApprover = CheckInitiatorIDWithApprovers(Assigned_Group, InitiatorID, step);
                    if (CheckTheInitiatorWithApprover) {

                        tempObj.getValue("ApproverMatch").setSimpleValue("Yes");
                        TriggerLater = true;

                    }
                    // MDSIM - 5351 ::: Implementation Ended by Sourav Tamli //

                    if ((!tempObj.isInWorkflow("NewItemOnboarding")) && (TriggerLater == false)) {
                        step.getWorkflowHome().getWorkflowByID("NewItemOnboarding").start(tempObj, "workflow triggered sucessfully");


                    } else if (TriggerLater) {

                        node.getValue("TriggerPending").addValue(tempObj.getID());

                    }
                } else if (status == "Reject") {
                    logger.info("-_-_-_-_-_-Inside Reject If-_-_-");
                    populateFacilityValuesForMrktExtension(node);
                }
            }

        }
    }

    logger.info("-_-_-_-_-_-Exit While Loop For createTempObjforMarket Function -_-_-");
}

function get_Approval_GRID_users(targetMarketName, Category, GRID_type, user_group) {
    var getUser = false;
    var count = 0;
    var user_flag = 0;
    var Assigne_ID = "";
    var cat = "SIM_" + Category;

    var child_ent = step.getEntityHome().getEntityByID(GRID_type).getChildren().toArray();
    for (var i = 0; i < child_ent.length; i++) {
        if (targetMarketName == child_ent[i].getName()) {
            var Market_ID = child_ent[i].getID();
            Assigne_ID = step.getEntityHome().getEntityByID(Market_ID).getValue(cat).getSimpleValue();
        }
    }
    logger.info("-GRID_type-" + GRID_type + "-Assigne_ID-" + Assigne_ID + "-user_group-" + user_group);
    var Team_Users = step.getGroupHome().getGroupByID("Approval_Grid_Users").getUsers().toArray();

    if (Assigne_ID != null) {
        for (var index = 0; index < Team_Users.length; index++) {
            var splits = Assigne_ID.split(",");
            if (splits.length > 0) {
                getUser = true;
                return getUser;
            }
        }

    }

}
// Not in Use ::: Sourav Tamli //
function validateTMSHVAIProdCtgy(node, step, logger, targetMarketID) {
    var lookupProductCategoryInfo = "";
    var boolenflag = false;
    var Managed_By = node.getValue("ItemManagedBy").getSimpleValue();
    if (productGroupValue == "SER") Managed_By = ""; //MDSIM-5237
    var ProductCategory = node.getValue("ProductCategory").getSimpleValue();
    if ((Managed_By == "HAVI") || (Managed_By == "TMS")) {
        if (Managed_By == "HAVI") {
            lookupProductCategoryInfo = lookup.getLookupTableValue("LookupCheckListHaviApprovalUsers", targetMarketID);
        } else if (Managed_By == "TMS") {
            lookupProductCategoryInfo = lookup.getLookupTableValue("LookupCheckListTMSApprovalUsers", targetMarketID);
        }

        if ((lookupProductCategoryInfo != null) && (lookupProductCategoryInfo != "")) {
            var lookupProductCategoryInfo1 = lookupProductCategoryInfo.split("\\|");
            if (!boolenflag) {
                for (var counter = 0; counter < lookupProductCategoryInfo1.length; counter++) {

                    logger.info(" ProductCategory = " + ProductCategory + " lookupProductCategoryInfo1[counter] = " + lookupProductCategoryInfo1[counter]);
                    if ((ProductCategory.equalsIgnoreCase(lookupProductCategoryInfo1[counter]))) {
                        boolenflag = true;
                    }
                }
            }
        }
    }
    return boolenflag;
}

function getMcClementMarkets(marketID, node, step, logger) {
    logger.info("-_-_-_-_-_-_-_-_- Inside getMcClementMarkets Function -_-_-_-_-_-_-_-_-");
    var lov = step.getListOfValuesHome().getListOfValuesByID("McClementXCMMarkets").getListOfValuesValueByID(marketID);
    logger.info("lov-_-_-_->" + lov);
    if (lov != null) {
        return true;
    } else {
        return false;
    }

}

function getAICategory(node) {

    var packCaseToAIRefs = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("PackCaseToAI")).toArray();
    var MP_Object;
    var AI_Object;
    var AICategory;
    for (var ref = 0; ref < packCaseToAIRefs.length; ref++) {

        MP_Object = packCaseToAIRefs[ref].getTarget();
        AI_Object = MP_Object.getParent();
        AICategory = AI_Object.getValue("AICategory").getID();

    }

    return AICategory;
}

// Added by Sourav Tamli for MDSIM - 5351 //
function CheckInitiatorIDWithApprovers(user_group, InitiatorID, step) {

    var MatchFound = false;
    var FetchUserGroupFRomStep = step.getGroupHome().getGroupByID(user_group);
    logger.info("FetchUserGroupFRomStep::" + FetchUserGroupFRomStep);
    var UsersAssignedInGroup = FetchUserGroupFRomStep.getUsers().toArray();
    for (var i = 0; i < UsersAssignedInGroup.length; i++) {

        if (UsersAssignedInGroup[i].getID() == InitiatorID) {

            MatchFound = true;
            break;

        }

    }

    logger.info("MatchFound ::" + MatchFound);
    return MatchFound;

}
  </javaScript>
</config>
Action #2 (JavaScriptBusinessActionWithBinds):
<config>
  <bindings>
    <binding alias="node" type="Node" contract="CurrentObjectBindContract"/>
    <binding alias="step" type="Manager" contract="ManagerBindContract"/>
    <binding alias="logger" type="Logger" contract="LoggerBindContract"/>
    <binding alias="mailer" type="MailHome" contract="MailHomeBindContract"/>
    <binding alias="workflow" type="Workflow" contract="CurrentWorkflowBindContract"/>
  </bindings>
  <messages>
    <message key="errorMessage">
      <default>{msg}</default>
    </message>
  </messages>
  <javaScript>
//********************** 2 ***************************

/*************************************************************
Rule Name: Creation of McDonald Item and WRIN# Generation.
Developed: Suresh Maddula/ Shiva Dayal 
Summary: This business rule will create McDonald Item when Data Team Approves the Pack/Case supplied by the Supplier.
/*************************************************************/
var packToAIref;
var matchfound = "";
fetchUserDefinedHierarchy();
var objTypeID = node.getObjectType().getID();
var McDitem;
var temp = 0;
var v_mcDitem_val = 0;
var PreferredPrefix = node.getValue("PreferredPrefix").getSimpleValue();
delRejectReference(node);
var WRINGeneration = step.getProductHome().getProductByID("McDonaldRawItem").getValue("WRINGeneration").getSimpleValue();
var suppStatus = node.getValue("SupplierRevisionRequired").getSimpleValue();
var ReferenceType = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension");
var MatchedItem = node.getValue("MatchedItem").getSimpleValue();
var Managed_By = node.getValue("ItemManagedBy").getSimpleValue();
var productGroup = node.getValue("ProductGroup").getSimpleValue();
var productGroupID = node.getValue("ProductGroup").getID(); //MDSIM-4666
var ComTradeItemVolume, ComTradeItemWeight, ComTradeItemHeight;

var IsLiquid = node.getValue("IsLiquid").getSimpleValue();
var ProductCategory = node.getValue("ProductCategory").getSimpleValue();
var TradeItemFlavour = node.getValue("TradeItemFlavour").getSimpleValue();
var IsPortionControlled = node.getValue("IsPortionControlled").getSimpleValue();
var PromotionName = node.getValue("PromotionName").getSimpleValue();
var PromotionType = node.getValue("PromotionType").getSimpleValue();

var TradeItemHeight = node.getValue("TradeItemHeight").getSimpleValue();
ComTradeItemHeight = getUOMConversion("TradeItemHeight", TradeItemHeight);
var TradeItemWidth = node.getValue("TradeItemWidth").getSimpleValue();
ComTradeItemWidth = getUOMConversion("TradeItemWidth", TradeItemWidth);
var TradeItemDepth = node.getValue("TradeItemDepth").getSimpleValue();
ComTradeItemDepth = getUOMConversion("TradeItemDepth", TradeItemDepth);
var TradeItemWeight = node.getValue("TradeItemWeight").getSimpleValue();
ComTradeItemWeight = getUOMConversion("TradeItemWeight", TradeItemWeight);
var TradeItemVolume = node.getValue("TradeItemVolume").getSimpleValue();
ComTradeItemVolume = getUOMConversion("TradeItemVolume", TradeItemVolume);
var Gender = node.getValue("Gender").getSimpleValue();
logger.info(node.getValue("AttributesforWRIN").getSimpleValue() + "-Gender -" + Gender);

// **************** Coding for WRIN Suffix Gaps Started ********************
var matchFound1 = 0;
var Gender = node.getValue("Gender").getSimpleValue();
var matchFound1Suffix = 0;
var suffixFound = 0;
var formattedPrefixSuffix = 0;
var mcdProdReference = step.getProductHome().getProductByID(packToAIref);
logger.info("-_-_-_-" + mcdProdReference);
var mcdProductID = mcdProdReference.getID();
logger.info("-_-mcdProductID-_-" + mcdProductID);
var MissingSuffixesForPrefix = mcdProdReference.getValue("MissingSuffixesForPrefix").getSimpleValue();
var Case;
// **************** Coding for WRIN Suffix Gaps Ended ********************



// ***** Concurrency Started
var IsPrefixMigrated = mcdProdReference.getValue("IsPrefixMigrated").getSimpleValue();
logger.info("-_-IsPrefixMigrated-_-" + IsPrefixMigrated);
// ***** Concurrency Ended


var MarketRef = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension")).toArray();

logger.info("-MarketRef.length -" + MarketRef.length);

if (suppStatus != "Yes" && (MarketRef.length >= 1)) {
    if (MatchedItem != null) {
        //Creating the PackToMcDonaldItem reference.
        var MatchedItem = node.getValue("MatchedItem").getSimpleValue();
        var mcdidreference = step.getProductHome().getProductByID(MatchedItem);
        if (mcdidreference == null) {
            throw "Selected " + MatchedItem + " is not available in the system.";
        }
        node.createReference(mcdidreference, "PackToMcDonaldItem");

        //Started Prod Fix -_-_-_-0322
        getMcDItemByPackaging();
        populateMrktReferences(McDitem, node, "ItemToMarketCategory");

        //Ended Prod Fix -_-_-_-0322

        //Populating the WRIn values from Mcd to Case/Pack

        node.getValue("WRINPrefix").setSimpleValue(mcdidreference.getValue("WRINPrefix").getSimpleValue());
        node.getValue("WRINSuffix").setSimpleValue(mcdidreference.getValue("WRINSuffix").getSimpleValue());
        node.getValue("WRINNUMBER").setSimpleValue(mcdidreference.getValue("WRINNUMBER").getSimpleValue());
        var rawItemIdentifier = node.getValue("a_mm_DevSUIdentifier").getSimpleValue();
        var concatenatedRawItemIdentifier = rawItemIdentifier;
        var concatenatedRawItemIdentifier = step.getProductHome().getProductByID(concatenatedRawItemIdentifier);
        if (concatenatedRawItemIdentifier != null) {
            concatenatedRawItemIdentifier.getValue("a_mm_DevSUIdentifier").setSimpleValue(MatchedItem);
            concatenatedRawItemIdentifier.startWorkflowByID("wf_mm_SIMOnboardingResponseForDevSU", "Initiated in wf_mm_SIMOnboardingResponseForDevSU");
        }
    } else if (ReferenceType != null) {
        var ReferenceTypes = node.getReferences(ReferenceType);
        //logger.info(ReferenceTypes.size()+"-_-ReferenceTypes.length-_-");								
        if (ReferenceTypes.size() > 0) {
            fetchUserDefinedHierarchy(node);
            var AIRef = step.getProductHome().getProductByID(packToAIref);
            var AIRefID = AIRef.getID();
            checkSuffixAttributesByPrdGrp(node, AIRefID);
        }
    }


    var nodePrefix = node.getValue("WRINPrefix").getSimpleValue();
    var nodeSuffix = node.getValue("WRINSuffix").getSimpleValue();

    logger.info("-nodePrefix.length -" + nodePrefix);
    logger.info("-nodeSuffix.length -" + nodeSuffix);

    if (nodePrefix == "" || nodeSuffix == "" || nodePrefix == null || nodeSuffix == null) {
        throw "Due to some Technical glitch unable to Process the request.Please Click on Submit Button and resubmit the request from Data Team.";
    }

    setWRINtoTempObjects();
    var McDitemReference = getMcDItemByPackaging();

    generateObjNameLib.generateObjName(node, step, logger);
    var mcd = getMcDItem(node);
    generateObjNameLib.generateObjName(mcd, step, logger);

    //Purpose of the change is to populate GTIN to supplier item from Case/Pack or vice versa.As we have removed GTIN from CopyAttribute Group
    //MDSIM:3864-Started:Added the below condition to handle match Item. By Debajit July 16, 2020
    var siGTIN = mcd.getValue("GTIN").getSimpleValue();
    if (siGTIN != null && siGTIN.substring(0, 8) == "50195500") {
        node.getValue("GTIN").setSimpleValue(siGTIN);
        node.getValue("IsNewItem").setSimpleValue("Yes");
    } else if (siGTIN != null && siGTIN.substring(0, 8) != "50195500") {
        node.getValue("GTIN").setSimpleValue(siGTIN);
        node.getValue("IsNewItem").setSimpleValue("No");
    } else {
        mcd.getValue("GTIN").setSimpleValue(node.getValue("GTIN").getSimpleValue());
    }
    //MDSIM:3864-Ended:Added the below condition to handle match Item. By Debajit July 16, 2020
    McDitemReference.approve();
}

//Adding To McDonald Product Is PrefixesMigrated to Yes.
mcdProdReference.getValue("IsPrefixMigrated").setSimpleValue("Yes");

//moved - start
// To set the value at Supplier Item Level
var McDItemRef = step.getReferenceTypeHome().getReferenceTypeByID("PackToMcDonaldItem");
var SupplierItem = node.getReferences(McDItemRef);
logger.info("SupplierItem: " + SupplierItem);
for (var i = 0; i < SupplierItem.size(); i++) {
    var mcdProduct = SupplierItem.get(i).getTarget();
    if (node.getValue("ItemNote").getSimpleValue() != null) {
        //mcdProduct.getValue("ItemNote").addValue(node.getValue("ItemNote").getSimpleValue());
        var ItemComments = node.getValue("ItemNote").getSimpleValue();
        var commentsSplit = ItemComments.split('<multisep/>');
        for (var j = 0; j < commentsSplit.length; j++) {
            logger.info("Splited comments: " + commentsSplit[j]);
            mcdProduct.getValue("ItemNote").addValue(commentsSplit[j]);
        }
    }

}
//moved - end

approveAllObjectsLib.approveAllObjects(node, step, logger);

function checkSuffixAttributesByPrdGrp(McDitem, AIRefID) {
    logger.info(McDitem.getID() + "-_- MCDITEMproductGroup In checkSuffixAttributesByPrdGrp-_-_-_-_-_-_-_-_-_-> " + productGroup);
    var AttributesforWRIN;
    var GTIN = node.getValue("GTIN").getSimpleValue();
    if (objTypeID == "Pack") {
        logger.info("-_-2-_-_-_-_-");
        var packReferences = node.getReferencedByProducts().toArray();
        for (var counter = 0; counter < packReferences.length; counter++) {
            if ((packReferences[counter].getReferenceType() == "PackagingCaseToPack")) {
                Case = packReferences[counter].getSource();
                GTIN = Case.getValue("GTIN").getSimpleValue();
            }
        }
    }
    var v_mcDitem_GTIN;

    var productGroupID = node.getValue("ProductGroup").getID(); //MDSIM-4666
    if (productGroupID == "F" && IsLiquid == "Yes") {
        var WRINPrefixAttributesforFoodLiquid = productGroup + ";" + IsLiquid + ";" + ProductCategory + ";" + TradeItemFlavour + ";" + ComTradeItemVolume + ";" + ComTradeItemWeight + ";" + IsPortionControlled;
        var wrinSuffixAttrforFoodLiquid = McDitem.getValue("WRINSuffixAttributesforFood-Liquid").getSimpleValue();
        var wrinAttributesforFoodLiquid = WRINPrefixAttributesforFoodLiquid + ";" + wrinSuffixAttrforFoodLiquid + ";";
        McDitem.getValue("WRINPrefixAttributesforFoodLiquid").setSimpleValue(WRINPrefixAttributesforFoodLiquid);
        node.getValue("WRINPrefixAttributesforFoodLiquid").setSimpleValue(WRINPrefixAttributesforFoodLiquid);
        McDitem.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforFoodLiquid);
        node.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforFoodLiquid);
    } else if (productGroupID == "F" && IsLiquid == "No") {
        var wrinPrefixAttrforFoodNonLiquid = productGroup + ";" + IsLiquid + ";" + ProductCategory + ";" + ComTradeItemHeight + ";" + ComTradeItemWidth + ";" + ComTradeItemDepth + ";" + TradeItemFlavour + ";" + ComTradeItemWeight + ";" + IsPortionControlled;
        var wrinSuffixAttrforFoodNonLiquid = McDitem.getValue("WRINSuffixAttributesforFoodNonLiquid").getSimpleValue();
        var wrinAttributesforFoodNonLiquid = wrinPrefixAttrforFoodNonLiquid + ";" + wrinSuffixAttrforFoodNonLiquid + ";";
        McDitem.getValue("WRINPrefixAttributesforFoodNonLiquid").setSimpleValue(wrinPrefixAttrforFoodNonLiquid);
        node.getValue("WRINPrefixAttributesforFoodNonLiquid").setSimpleValue(wrinPrefixAttrforFoodNonLiquid);
        McDitem.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforFoodNonLiquid);
        node.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforFoodNonLiquid);
    } else if ((productGroup == "Operating Supplies") || (productGroup == "Uniforms") || (productGroup == "Miscellaneous")) {
        McDitem.getValue("ConvertTradeItemVolume").setSimpleValue(ComTradeItemVolume);
        node.getValue("ConvertTradeItemVolume").setSimpleValue(ComTradeItemVolume);
        McDitem.getValue("ConvertTradeItemWeight").setSimpleValue(ComTradeItemWeight);
        node.getValue("ConvertTradeItemWeight").setSimpleValue(ComTradeItemWeight);
        var wrinPrefixAttrforOperational = productGroup + ";" + ComTradeItemHeight + ";" + ComTradeItemWidth + ";" + ComTradeItemDepth + ";" + IsPortionControlled + ";" + TradeItemFlavour;
        var wrinSuffixAttrforOperational = McDitem.getValue("WRINSuffixAttributesforOpsSupply").getSimpleValue();
        var wrinAttributesforOperational = wrinPrefixAttrforOperational + ";" + wrinSuffixAttrforOperational + ";";
        McDitem.getValue("WRINPrefixAttributesforOpsSupply").setSimpleValue(wrinPrefixAttrforOperational);
        node.getValue("WRINPrefixAttributesforOpsSupply").setSimpleValue(wrinPrefixAttrforOperational);
        McDitem.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforOperational);
        node.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforOperational);
    } else if ((productGroupID == "SER")) //MDSIM-5237 - start
    {
        var itemShortDescription = node.getValue("TradeItemShortDescription").getSimpleValue();
        var itemLongDescription = node.getValue("TradeItemLongDescription").getSimpleValue();
        var itemToSupplierArray = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToSupplier")).toArray();
        var supplierName = "";
        for (var ref = 0; ref < itemToSupplierArray.length; ref++) {
            if (supplierName == "") {
                supplierName = itemToSupplierArray[ref].getTarget().getName();
            } else {
                supplierName = supplierName + "," + itemToSupplierArray[ref].getTarget().getName();
            }
        }

        var wrinPrefixAttrforServices = productGroup + ";" + ProductCategory + ";" + itemShortDescription + ";" + itemLongDescription + ";" + supplierName;
        //var wrinSuffixAttrforServices = McDitem.getValue("WRINSuffixAttributesforServices").getSimpleValue();
        //var wrinAttributesforServices = wrinPrefixAttrforServices + ";" + wrinSuffixAttrforServices + ";";
        var wrinAttributesforServices = wrinPrefixAttrforServices + ";";
        //McDitem.getValue("WRINPrefixAttributesforServices").setSimpleValue(wrinPrefixAttrforServices);
        //node.getValue("WRINPrefixAttributesforServices").setSimpleValue(wrinPrefixAttrforServices);
        McDitem.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforServices);
        node.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforServices);
    } //MDSIM-5237 - end
    else if (productGroup == "Paper & Packaging") {
        McDitem.getValue("ConvertTradeItemWeight").setSimpleValue(ComTradeItemWeight);
        node.getValue("ConvertTradeItemWeight").setSimpleValue(ComTradeItemWeight);
        var WRINPrefixAttrforPackaging = productGroup + ";" + ComTradeItemHeight + ";" + ComTradeItemWidth + ";" + ComTradeItemDepth;
        var wrinSuffixAttrforPackaging = McDitem.getValue("WRINSuffixAttributesforPackaging").getSimpleValue();
        var wrinAttributesforPackaging = WRINPrefixAttrforPackaging + ";" + wrinSuffixAttrforPackaging + ";";
        McDitem.getValue("WRINPrefixAttributesforPackaging").setSimpleValue(WRINPrefixAttrforPackaging);
        node.getValue("WRINPrefixAttributesforPackaging").setSimpleValue(WRINPrefixAttrforPackaging);
        McDitem.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforPackaging);
        node.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforPackaging);
    } else if (productGroup == "Promotions") {
        var WRINPrefixAttrforPremium = productGroup + ";" + PromotionName + ";" + PromotionType;
        var wrinSuffixAttrforPremium = McDitem.getValue("WRINSuffixAttributesforToys").getSimpleValue();
        var wrinAttributesforPremium = WRINPrefixAttrforPremium + ";" + wrinSuffixAttrforPremium + ";";
        McDitem.getValue("WRINPrefixAttributesforToys").setSimpleValue(WRINPrefixAttrforPremium);
        node.getValue("WRINPrefixAttributesforToys").setSimpleValue(WRINPrefixAttrforPremium);
        McDitem.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforPremium);
        node.getValue("AttributesforWRIN").setSimpleValue(wrinAttributesforPremium);
    }

    AttributesforWRIN = node.getValue("AttributesforWRIN").getSimpleValue();
    logger.info("-AttributesforWRIN-" + AttributesforWRIN);
    if (AttributesforWRIN != null) {
        var v_WRINNumResults = step.getProductHome().getProductByID(AIRefID).getChildren();
        if (v_WRINNumResults.size() > 0) {
            for (var v_ctr = 0; v_ctr < v_WRINNumResults.size(); v_ctr++) {
                var v_mcDitem = v_WRINNumResults.get(v_ctr);
                var v_mcDitem_val = v_mcDitem.getID();
                var packsubstr = v_mcDitem_val.substring(0, 2);

                if (v_mcDitem_val != McDitem.getID()) {
                    //logger.info(AIRefID + "-_-_-McDitem.getID-_-" + v_mcDitem_val);
                    var AttributesforWRINSys = v_mcDitem.getValue("AttributesforWRIN").getSimpleValue();
                    var AttributesforWRINVal = McDitem.getValue("AttributesforWRIN").getSimpleValue();
                    var productGroupSys = v_mcDitem.getValue("ProductGroup").getSimpleValue();
                    var productGroupVal = McDitem.getValue("ProductGroup").getSimpleValue();
                    v_mcDitem_GTIN = v_mcDitem.getValue("GTIN").getSimpleValue();

                    if ((AttributesforWRINVal == AttributesforWRINSys) && (productGroupSys == productGroupVal)) {
                        logger.info(v_mcDitem.getValue("AttributesforWRIN").getSimpleValue() + "-_-_-Before setting-_-> " + v_mcDitem);
                        logger.info(node.getValue("AttributesforWRIN").getSimpleValue() + "-_-_-Before setting-_-> " + node);
                        node.getValue("WRINPrefix").setSimpleValue(v_mcDitem.getValue("WRINPrefix").getSimpleValue());
                        node.getValue("WRINSuffix").setSimpleValue(v_mcDitem.getValue("WRINSuffix").getSimpleValue());
                        node.getValue("WRINNUMBER").setSimpleValue(v_mcDitem.getValue("WRINNUMBER").getSimpleValue());

                        if ((packsubstr == "SI") && (GTIN == v_mcDitem_GTIN)) {
                            temp = 1;
                            matchfound = v_mcDitem_val;
                        } else {
                            temp = 0;
                        }
                    }
                }
            }
        }
        logger.info("-_-_-temp-_-_-for WRIN-_-_-_-> " + temp);
        if (temp == 0) {
            if (WRINGeneration == "Yes") {
                generateWRIN(AIRef, McDitem);
            }
            generateMcDItem(AIRef);
            logger.info("-_-McDitem- -" + McDitem);
        } else {
            logger.info("-SHIVAAA-" + matchfound);
            var mcdidreference = step.getProductHome().getProductByID(matchfound);
            node.createReference(mcdidreference, "PackToMcDonaldItem");
            var pack = getpack();
            //the below code is used to populate markets for the existing SI item.
            var marcatRef = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketCategory");
            var marcatRefObj = node.getReferences(marcatRef);

            for (var cm = 0; cm < marcatRefObj.size(); cm++) {
                var marCategory = marcatRefObj.get(cm).getTarget();
                var ItemLocalNumber = marcatRefObj.get(cm).getValue("ItemLocalNumber").getSimpleValue();
                try {
                    var mcdreference = mcdidreference.createReference(marCategory, "ItemToMarketCategory");
                    if (ItemLocalNumber != "" && ItemLocalNumber != null) {

                        mcdreference.getValue("ItemLocalNumber").setSimpleValue(ItemLocalNumber);

                    }
                    mcdreference.getValue("DataTeamOnEntryCreatedOn").setSimpleValue(marcatRefObj.get(cm).getValue("DataTeamOnEntryCreatedOn").getSimpleValue());
                    mcdreference.getValue("DataTeamOnExitCreatedOn").setSimpleValue(marcatRefObj.get(cm).getValue("DataTeamOnExitCreatedOn").getSimpleValue());
                } catch (e) {
                    logger.info("-Exception ItemToMarketCategory is-" + e);
                    //throw e;
                }
            }
            //mcdidreference.approve(); 0413
        }
    }
}

//This function is used to convert the current uom into standard uom.
function getUOMConversion(attribute, value) {
    var convertedValue;
    if (value != null) {
        var valueSplit = value.split(" ");

        if (attribute == "TradeItemVolume") {
            if (valueSplit[1] == "gal") {
                convertedValue = valueSplit[0] * 128 + " fl oz (US)";
            } else if (valueSplit[1] == "l") {
                convertedValue = valueSplit[0] * 33.814 + " fl oz (US)";
            } else if (valueSplit[1] == "ml") {
                convertedValue = valueSplit[0] * 0.033814 + " fl oz (US)";
            } else {
                convertedValue = value;
            }
        } else if (attribute == "TradeItemWeight") {
            if (valueSplit[1] == "g") {
                convertedValue = valueSplit[0] * 0.001 + " kg";
            } else if (valueSplit[1] == "lb") {
                convertedValue = valueSplit[0] * 0.453592 + " kg";
            } else if (valueSplit[1] == "oz") {
                convertedValue = valueSplit[0] * 0.0283495 + " kg";
            } else {
                convertedValue = value;
            }
        } else if (attribute == "TradeItemDepth" || attribute == "TradeItemWidth" || attribute == "TradeItemHeight") {
            if (valueSplit[1] == "in") {
                convertedValue = valueSplit[0] * 2.54 + " cm";
            } else if (valueSplit[1] == "ft") {
                convertedValue = valueSplit[0] * 30.48 + " cm";
            } else if (valueSplit[1] == "m") {
                convertedValue = valueSplit[0] * 100 + " cm";
            } else {
                convertedValue = value;
            }
        }
    }
    return convertedValue;
}

//This is used to get AI reference which have taken place from portal and save it in an attribute.
function fetchUserDefinedHierarchy() {
    var references = node.getProductReferences().asSet().iterator();
    while (references.hasNext()) {
        var reference = references.next();
        if (reference.getReferenceType() == "PackCaseToAI") {
            packToAIref = reference.getTarget().getID();
        }
    }
}

//This function is used to create the facility reference of pack to newly created McDonaldItem.
function createfacilityReference(mcdItem, node) {
    logger.info("In CREATE FACILITYREF.-_-_-_-_-_->" + mcdItem);
    var references = node.getProductReferences().asSet().iterator();
    while (references.hasNext()) {
        var reference = references.next();
        if (reference.getReferenceType() == "PackCaseToAI") {
            logger.info("-_-_-Inside ItemToFacilityExtension-_-_-_-_-_-_-_-");
            var airef = reference.getTarget().getID();
            var airefID = step.getProductHome().getProductByID(airef);
            try {
                var itemToAI = mcdItem.createReference(airefID, "RawItemToAI");
                logger.info("-_-_-Inside ItemToFacility Referenced-_-_-_-_-_-_-_-");
            } catch (e) {
                logger.info("Exception RawItemToAI is:-_-_-_-_-_->" + e);
                //throw e;
            }
        }
    }
}

//This function is used to populate facility metadata from Pack/Case to McDitem.
function populateFacilityValues(supplierItem) {
    logger.info("populateFacilityValues Inside-_-_-_-_-_-_-_->>");
    var ItemToFacilityID;
    var ItemToFacilityRefList = new java.util.ArrayList();
    var supplierIDRef = step.getProductHome().getProductByID(supplierItem);

    var Market_Status = "";
    var FacilityType = "";
    var IsShipPoint = "";
    var SupplierID = "";
    var SupplierName = "";
    var suppreff = "";
    //Quality Change - start
    var references1 = node.getReferences().asSet().iterator();
    var itemFacilityExtRefType = supplierItem.getValue("REF_ItemToFacilityExtension").getSimpleValue() + "";
    var addedExtensionRef = step.getReferenceTypeHome().getReferenceTypeByID(itemFacilityExtRefType);

    var itemSupplierRefType = supplierItem.getValue("REF_ItemToSupplier").getSimpleValue() + "";
    //Quality Change - end
    var addedExtensionRefObj = node.getReferences(addedExtensionRef);
    logger.info("Facility Size-" + addedExtensionRefObj.size());
    var count = 0;

    while (references1.hasNext()) {
        var reference1 = references1.next();
        if (reference1.getReferenceType() == itemFacilityExtRefType) {
            count++;
            var Market_Status = reference1.getValue("FacilityApprovedCategory_Market_Status").getSimpleValue();
            var FacilityType = reference1.getValue("FacilityType").getSimpleValue();
            var IsShipPoint = reference1.getValue("IsShipPoint").getSimpleValue();
            var SupplierID = reference1.getValue("SupplierID").getSimpleValue();
            var SupplierName = reference1.getValue("SupplierName").getSimpleValue();
            var ItemShippedFacility = reference1.getValue("ItemShippedFacility").getSimpleValue();
            var ItemManufacturingPoint = reference1.getValue("ItemManufacturingPoint").getSimpleValue();
            var supplier = step.getEntityHome().getEntityByID(SupplierID);
            var facilityID = reference1.getTarget().getID();
            var facilityName = reference1.getTarget().getName();
            logger.info(facilityID + "-Facilities Supplier Metadata-" + facilityName);

            if (supplier != null) {
                try {
                    suppreff = supplierIDRef.createReference(supplier, itemSupplierRefType);
                    suppreff.getValue("ItemFacilityID").addValue(facilityID);
                    suppreff.getValue("ItemFacilityName").addValue(facilityName);
                    logger.info("Referenced SUPP-" + suppreff);
                } catch (e) {
                    logger.info("Before Exception");
                    if (suppreff != "" || suppreff != null) {
                        logger.info("In  Exception" + suppreff);
                        suppreff.getValue("ItemFacilityID").addValue(facilityID);
                        suppreff.getValue("ItemFacilityName").addValue(facilityName);
                    }
                    logger.info("Exception while adding Supplier Reference to McDonaldItem." + e);
                    throw e;
                }
            }
            //Quality Change - start
            var references = supplierIDRef.getReferences().asSet().iterator();
            supplierIDRef.getValue("TradeItemStatus").setSimpleValue(node.getValue("TradeItemStatus").getSimpleValue()); //1102
            var itemFacilityRefType = node.getValue("REF_ItemToFacility").getSimpleValue() + "";

            while (references.hasNext()) {
                var reference = references.next();
                if (reference.getReferenceType() == itemFacilityRefType) {
                    if (reference.getTarget().getID() == facilityID) {
                        //Quality Change - end			
                        logger.info(facilityID + "-Facilty Meta Addition-" + reference.getTarget().getID());
                        var approvedStatus = node.getValue("TradeItemStatus").getSimpleValue();
                        var additionalPartyIdentification = node.getValue("AdditionalPartyIdentification").getSimpleValue();

                        if (null != Market_Status) {
                            reference.getValue("FacilityApprovedCategory_Market_Status").setSimpleValue(Market_Status);
                        }
                        if (null != FacilityType) {
                            reference.getValue("FacilityType").setSimpleValue(FacilityType);
                        }
                        if (null != IsShipPoint) {
                            reference.getValue("IsShipPoint").setSimpleValue(IsShipPoint);
                        }

                        if (null != additionalPartyIdentification) {
                            reference.getValue("AdditionalPartyIdentification").setSimpleValue(additionalPartyIdentification);
                        }
                        if (null != SupplierID) {
                            reference.getValue("SupplierID").setSimpleValue(SupplierID);
                        }
                        if (null != SupplierName) {
                            reference.getValue("SupplierName").setSimpleValue(SupplierName);
                        }
                        if (null != ItemShippedFacility) {
                            reference.getValue("ItemShippedFacility").setSimpleValue(ItemShippedFacility);
                        }
                        if (null != SupplierName) {
                            reference.getValue("ItemManufacturingPoint").setSimpleValue(ItemManufacturingPoint);
                        }
                    }
                } //if
                logger.info(FacilityType + "CHeck-" + Market_Status);
            }
        }
    }
}

//This function is used to generate WRIN# which is a combination WRINPreffix and WRINSuffix.
function generateWRIN(AIRef, mcdItem) {
    var wrinPrefixMcdProd = AIRef.getValue("WRINPrefix").getSimpleValue();
    var AIWRINPrefixes = new java.util.ArrayList();

    var lastUsedPrefix = 00000;
    var maxWRINPrefix = step.getProductHome().getProductByID("McDonaldRawItem").getValue("MaxWrinNumberPrefix").getSimpleValue();

    var maxSuffix = 0;
    var formattedWRINSuffix;

    //checking whether the selected AI has any WRINPreffix or not.
    if (wrinPrefixMcdProd != null) {
        wrinPrefixMcdProd = appendZeros(wrinPrefixMcdProd + "", 5);
        lastUsedPrefix = wrinPrefixMcdProd;
        logger.info("-_-_-_-_-_-_-" + productGroup + "-_-_-_-=-_-" + Gender);

        if (productGroup == "Promotions" && Gender != null && Gender != "Unisex") {
            maxSuffix = generateMaxWrinSuffixForPromotion(lastUsedPrefix, mcdItem);
        } else if (productGroup == "Promotions" && Gender != null && Gender == "Unisex") {
            maxSuffix = generateMaxWrinSuffixForPromotion(lastUsedPrefix, mcdItem);
        } else {
            maxSuffix = generateMaxWrinSuffix(lastUsedPrefix, mcdItem);
        }
        logger.info("-Sending maxSuffix-" + maxSuffix);
        formattedWRINSuffix = appendZeros(maxSuffix + "", 3);
    } else {
        logger.info("-Insiode else-_-_-_-_-_-> ");
        lastUsedPrefix = step.getProductHome().getProductByID("McDonaldRawItem").getValue("MaxWrinNumberPrefix").getSimpleValue();
        lastUsedPrefix++;
        lastUsedPrefix = appendZeros(lastUsedPrefix + "", 5);
        step.getProductHome().getProductByID("McDonaldRawItem").getValue("MaxWrinNumberPrefix").setSimpleValue(lastUsedPrefix);

        if (productGroup == "Promotions" && Gender != null && Gender != "Unisex") {
            if (Gender == "Boy") {
                formattedWRINSuffix = "001";
            } else if (Gender == "Girl") {
                formattedWRINSuffix = "000";
            }
        } else {
            formattedWRINSuffix = "000";
        }
        AIRef.getValue("WRINPrefix").setSimpleValue(lastUsedPrefix);
    }


    //WRINSuffix should be less or equal to 999 if not we have to create a new Predix and take suffix value as '001'.
    if (formattedWRINSuffix > 999) {
        // **************** Coding for WRIN Suffix Gaps Started ********************

        if (MissingSuffixesForPrefix != null) {
            var MissingSuffixesForPrefixSplit = MissingSuffixesForPrefix.split(",");
            logger.info(MissingSuffixesForPrefixSplit.length + "-_-abbccc-_-");
            for (var i = 0; i < MissingSuffixesForPrefixSplit.length; i++) {
                var fetchSuffix = MissingSuffixesForPrefixSplit[i];
                //logger.info("-_-1-_-" + fetchSuffix);
                if ((matchFound1 == 0) && (formattedPrefixSuffix == 0)) {
                    var fetchPrefixSuffix = fetchSuffix;
                    logger.info("-_-fetchPrefixSuffix-_-" + fetchPrefixSuffix);
                    //we have to validate Whether Suffix is Part available
                    if (productGroup != "Promotions") {
                        matchFound1 = checkPrefSufFoundForNonPromotions(wrinPrefixMcdProd, fetchPrefixSuffix);
                        logger.info(fetchPrefixSuffix + "-matchFound1-" + matchFound1);
                        if (matchFound1 != 0) {
                            logger.info("====fetchPrefixSuffix==1=" + fetchPrefixSuffix);
                            formattedPrefixSuffix = fetchPrefixSuffix;
                        }
                        //if it is 1,means that is nt part of Migration search tree.
                    } else {
                        matchFound1 = checkPrefSufFoundForPromotions(wrinPrefixMcdProd, fetchPrefixSuffix);
                        if (matchFound1 != 0) {
                            logger.info("====fetchPrefixSuffix==1=" + fetchPrefixSuffix);
                            formattedPrefixSuffix = fetchPrefixSuffix;
                        }
                    }
                    logger.info("-_-matchFound1-_-" + matchFound1 + "-formattedPrefixSuffix-" + formattedPrefixSuffix);
                }
            }
        }
        logger.info("=====formattedPrefixSuffix===" + formattedPrefixSuffix);
        if (formattedPrefixSuffix == 0) {
            //throw "Max Range of the suffix reached for the given prefix node.Please create a new Prefix and tag the Item to the New Prefix";
            var message = new errorMessage(); //MDSIM-5459
            message.msg = errorLib.getErrorMessage(node, step, logger, "Maximum range of the suffix is reached for the given prefix node. Please create a new Prefix and tag the Item to the New Prefix.");
            throw message;
        } else {
            mcdItem.getValue("WRINPrefix").setSimpleValue(lastUsedPrefix);
            mcdItem.getValue("WRINSuffix").setSimpleValue(formattedPrefixSuffix);
            mcdItem.getValue("WRINNUMBER").setSimpleValue(lastUsedPrefix + formattedPrefixSuffix);

            node.getValue("WRINPrefix").setSimpleValue(lastUsedPrefix);
            node.getValue("WRINSuffix").setSimpleValue(formattedPrefixSuffix);
            node.getValue("WRINNUMBER").setSimpleValue(lastUsedPrefix + formattedPrefixSuffix);

            logger.info("-mcdItem11-_- -" + mcdItem);
            logger.info("-_-11-_- -" + mcdItem.getValue("WRINPrefix").getSimpleValue());
            logger.info("-_-11-_- -" + mcdItem.getValue("WRINNUMBER").getSimpleValue());
        }
        // **************** Coding for WRIN Suffix Gaps Ended ********************
    } else {
        lastUsedPrefix = appendZeros(lastUsedPrefix + "", 5);
        mcdItem.getValue("WRINPrefix").setSimpleValue(lastUsedPrefix);
        mcdItem.getValue("WRINSuffix").setSimpleValue(formattedWRINSuffix);
        mcdItem.getValue("WRINNUMBER").setSimpleValue(lastUsedPrefix + formattedWRINSuffix);

        node.getValue("WRINPrefix").setSimpleValue(lastUsedPrefix);
        node.getValue("WRINSuffix").setSimpleValue(formattedWRINSuffix);
        node.getValue("WRINNUMBER").setSimpleValue(lastUsedPrefix + formattedWRINSuffix);

        logger.info("-mcdItem11-_- -" + mcdItem);
        logger.info("-_-11-_- -" + mcdItem.getValue("WRINPrefix").getSimpleValue());
        logger.info("-_-11-_- -" + mcdItem.getValue("WRINNUMBER").getSimpleValue());
        logger.info("-_-11-_- -" + mcdItem.getValue("WRINSuffix").getSimpleValue());
        logger.info(lastUsedPrefix + "lastUsedPrefix .-_-" + mcdItem.getValue("WRINNUMBER").getSimpleValue());
    }

}

// This function is used to generate the WRINSuffix value based on the WRINPreffix value
function generateMaxWrinSuffix(WRINPrefixVal, mcdItem) {
    //Step 1::::: Check Whether WRINPrefixVal is already congigured in 
    var prefixFound = 0;
    var maxSuffix = -1;
    logger.info("-_-_-_-Inside generateMaxWrinSuffix-_-");
    var prefixAtParentLevel;
    // ***** Concurrency Started
    if (IsPrefixMigrated == "Yes") {
        prefixFound = 1;
    } else {
        prefixFound = 0;
    }

    // ***** Concurrency Ended

    /* Concurrency remove
    var PrefixesMigrated = step.getProductHome().getProductByID("McDonaldRawItem").getValue("PrefixesMigrated").getSimpleValue();
    if (null != PrefixesMigrated)
    {
    	logger.info("Inside Prefix Migrated");
    	var PrefixesMigratedSplit = PrefixesMigrated.split('<multisep/>');
    	logger.info(PrefixesMigratedSplit.length + "-_-abbccc-_-");
    	for (var i = 0; i < PrefixesMigratedSplit.length; i++)
    	{
    		var fetchPrefix = PrefixesMigratedSplit[i];
    		if (WRINPrefixVal == fetchPrefix)
    		{
    			prefixFound = 1;
    		}
    	}
    }
    */

    if (prefixFound == 0) {
        logger.info("Inside Prefix Found==0");
        var ValuesInLov = step.getListOfValuesHome().getListOfValuesByID("WRINPrefixSuffixMax").getListOfValuesValueByID(WRINPrefixVal);
        var prefixSuffixMax;
        var prefixSuffixSplit;
        var prefixStr;


        if (ValuesInLov != null) {
            prefixSuffixMax = ValuesInLov.getValue();
            prefixSuffixSplit = prefixSuffixMax.split("-");
            prefixStr = prefixSuffixSplit[0];
            maxSuffix = prefixSuffixSplit[1];
        }
        logger.info("-_-maxSuffix-_-_-_-" + maxSuffix);
        /* Concurrency remove
        var PrefixesMigrated = step.getProductHome().getProductByID("McDonaldRawItem").getValue("PrefixesMigrated").getSimpleValue();
        step.getProductHome().getProductByID("McDonaldRawItem").getValue("PrefixesMigrated").addValue(WRINPrefixVal); 
        */

        mcdProdReference.getValue("IsPrefixMigrated").setSimpleValue("Yes");
    }

    if (prefixFound == 1) {
        /*Added By Debajit on May 3, 2018*/

        logger.info("Inside Prefix Found==1");
        var ValuesInLov = step.getListOfValuesHome().getListOfValuesByID("WRINPrefixSuffixMax").getListOfValuesValueByID(WRINPrefixVal);
        var prefixSuffixMax;
        var prefixSuffixSplit;
        var prefixStr;
        var maxSuffix;

        /*Added By Debajit on May 3, 2018**/

        if (ValuesInLov != null) {
            prefixSuffixMax = ValuesInLov.getValue();
            prefixSuffixSplit = prefixSuffixMax.split("-");
            prefixStr = prefixSuffixSplit[0];
            maxSuffix = prefixSuffixSplit[1];
        }
        logger.info("Inside Prefix Found==1");
        WRINPrefixVal = appendZeros(WRINPrefixVal + "", 5);
        /*

        var WRINNumResults = new java.util.ArrayList(1000);
        logger.info("-before addin-"+WRINNumResults.size());
        var calWRINPrefixAtrribute = step.getAttributeHome().getAttributeByID("WRINPrefix");
        var searchQuery = new com.stibo.core.domain.singleattributequery.SingleAttributeQueryHome.SingleAttributeQuerySpecification(com.stibo.core.domain.Product, calWRINPrefixAtrribute, WRINPrefixVal);
        WRINNumResults = step.getHome(com.stibo.core.domain.singleattributequery.SingleAttributeQueryHome).querySingleAttribute(searchQuery).asList(1000);
        logger.info("-searchResults MAX-_-_-" + WRINNumResults.size());*/

        //Added for Production Fix started 032320108, replacement of above limitation for INC9604119.
        var McDProdRef = step.getReferenceTypeHome().getReferenceTypeByID("PackCaseToAI");
        var McDProdRefObj = node.getReferences(McDProdRef);
        var mcdProduct = null;

        for (var p = 0; p < McDProdRefObj.size(); p++) {
            mcdProduct = McDProdRefObj.get(p).getTarget();
        }

        var childrens = mcdProduct.getChildren();
        var suffixSet = new java.util.TreeSet();
        prefixAtParentLevel = mcdProduct.getValue("WRINPrefix").getSimpleValue();
        logger.info("-childrens-" + childrens.size());
        for (var v = 0; v < childrens.size(); v++) {
            var Child = childrens.get(v);
            suffixSet.add(Child);
        }

        var WRINNumResults = new java.util.ArrayList(suffixSet);
        logger.info("-After addin-" + WRINNumResults.size());
        //Added for Prodcution Fix Ended.

        if (WRINNumResults != null && WRINNumResults.size() > 0) {
            //logger.info("-In IF Loop>0-_-_-"+WRINNumResults.size());
            for (var v_ctr = 0; v_ctr < WRINNumResults.size(); v_ctr++) {
                var v_mcDitem = WRINNumResults.get(v_ctr);
                var v_mcDitem_val = v_mcDitem.getID();
                var packsubstr = v_mcDitem_val.substring(0, 2);
                if (packsubstr == "SI" && v_mcDitem_val != mcdItem.getID()) {
                    //logger.info(maxSuffix+"- maxSuffix v_mcDitem_val-_-" + v_mcDitem_val);
                    var wrinSuffix = v_mcDitem.getValue("WRINSuffix").getSimpleValue();
                    //logger.info ("-_-Debug wrinsuffix-_-_-_-_-" +wrinSuffix);
                    var currentPrefix = v_mcDitem.getValue("WRINPrefix").getSimpleValue();

                    if (prefixAtParentLevel == null)
                        prefixAtParentLevel = currentPrefix;

                    //In case of Re-Alignmnet, for New WRIN Generation 
                    //Only Parent Prefix Needs to be considered
                    //Added By Jawaid on 	
                    if (currentPrefix == prefixAtParentLevel) {
                        if (maxSuffix < wrinSuffix) {
                            //logger.info("-maxSuffix SURESH-_-_-" + maxSuffix);
                            maxSuffix = wrinSuffix;
                            //logger.info ("-_-Debug 1-_-_-_-_-" +maxSuffix);
                        }

                    }
                }
            }
        }
    }
    maxSuffix++;

    logger.info("last Max Suffix is " + maxSuffix);

    maxSuffix = getTheUnusedSuffix(WRINPrefixVal, maxSuffix, mcdItem, null);

    return maxSuffix;
}


//This 

// This function is used to prepend the zeros for the given string.
function appendZeros(Str, prefixLength) {
    logger.info("-str-" + Str + "-prefixLength-" + prefixLength);
    var appendZerosLength = prefixLength - Str.length;
    var formattedPrefix = "";
    for (var v_ctr = 0; v_ctr < appendZerosLength; v_ctr++) {
        formattedPrefix = '0' + formattedPrefix;
    }
    formattedPrefix = formattedPrefix + Str;
    logger.info("-appendZeros SENT-_-" + formattedPrefix);
    return formattedPrefix;
}

var references = node.getProductReferences().asSet().iterator();
var formattedEmail = "";
var Toemail = node.getValue("ContactEmail").getSimpleValue() + ";";
var ReqNum = node.getValue("RequestNumber").getSimpleValue();
var ApprovedByExtCatManagerID = node.getValue("ApprovedByExtCatManager").getSimpleValue();
var ApprovedByDataTeamUserID = node.getValue("ApprovedByDataTeamUser").getSimpleValue();
var ApprovedByGlobalUserID = node.getValue("ApprovedByGlobalUser").getSimpleValue();

var EnvType = node.getValue("EnvType").getSimpleValue();
var packId = node.getID();
var wrinNUMBER = node.getValue("WRINNUMBER").getSimpleValue();
logger.info(EnvType + "wrin#-_-" + wrinNUMBER);
var DataTeamUserIDVal;
var GlobalUserIDVal;
var ExtCatManagerIDVal;

if (null != ApprovedByDataTeamUserID) {
    DataTeamUserIDVal = step.getUserHome().getUserById(ApprovedByDataTeamUserID);
}
if (null != ApprovedByGlobalUserID) {
    GlobalUserIDVal = step.getUserHome().getUserById(ApprovedByGlobalUserID);
}

if (null != ApprovedByExtCatManagerID) {
    ExtCatManagerIDVal = step.getUserHome().getUserById(ApprovedByExtCatManagerID);
}

if (null != DataTeamUserIDVal) {
    if (null != DataTeamUserIDVal.getEMail())
        formattedEmail = formattedEmail + DataTeamUserIDVal.getEMail() + ";";
}
if (null != ExtCatManagerIDVal) {
    if (null != ExtCatManagerIDVal.getEMail())
        formattedEmail = formattedEmail + ExtCatManagerIDVal.getEMail() + ";";
}
if (null != GlobalUserIDVal) {
    if (null != GlobalUserIDVal.getEMail())
        formattedEmail = formattedEmail + GlobalUserIDVal.getEMail() + ";";
}


//Creation of McDonlad Item.
function generateMcDItem(AIRef) {
    McDitem = AIRef.createProduct(null, "McDonaldItem");
    logger.info("McDitem Created -_-_-_-_-_-_-_-_-_-> " + McDitem);
    var PackName = node.getValue("TradeItemName").getSimpleValue();
    logger.info(PackName + "-_-_-_-_-_-_-_-Pack  -_-_-_-_-_-_-_-_-_-> " + node.getName());
    //McDitem.setName(PackName.trim());
    logger.info("McDitem Name -_-_-_-_-_-_-_-_-_-> " + McDitem.getName());
    var McDonaldItemVal = McDitem.getID();

    if (objTypeID == "McDTargetMarketTempObject") {
        var mcdIDRef = getMcDItem();
        mcdIDRef.createReference(McDitem, "PackToMcDonaldItem");
    } else {
        try {
            node.createReference(McDitem, "PackToMcDonaldItem");
        } catch (e) {
            logger.info("Exception RawItemToAI is:-_-_-_-_-_->" + e);
            throw e;
        }
    }
    logger.info(McDitem.getValue("WRINNUMBER").getSimpleValue() + "-_-Before Copy-" + node.getValue("WRINNUMBER").getSimpleValue());
    copyAttributesLib.copyAttributes(node, McDonaldItemVal, step);
    logger.info(McDitem.getValue("WRINNUMBER").getSimpleValue() + "-_-After Copy-" + node.getValue("WRINNUMBER").getSimpleValue());
    McDitem.getValue("WRINPrefixAttributesforFoodLiquid").setSimpleValue(node.getValue("WRINPrefixAttributesforFoodLiquid").getSimpleValue());
    McDitem.getValue("WRINPrefixAttributesforFoodNonLiquid").setSimpleValue(node.getValue("WRINPrefixAttributesforFoodNonLiquid").getSimpleValue());
    McDitem.getValue("WRINPrefixAttributesforOpsSupply").setSimpleValue(node.getValue("WRINPrefixAttributesforOpsSupply").getSimpleValue());
    McDitem.getValue("WRINPrefixAttributesforPackaging").setSimpleValue(node.getValue("WRINPrefixAttributesforPackaging").getSimpleValue());
    McDitem.getValue("WRINPrefixAttributesforToys").setSimpleValue(node.getValue("WRINPrefixAttributesforToys").getSimpleValue());
    /*if(null!=node.getValue("ItemNote").getSimpleValue())
    {
    McDitem.getValue("ItemNote").addValue(node.getValue("ItemNote").getSimpleValue());
    }*/

    createfacilityReference(McDitem, node);
    //populateFacilityValues(McDonaldItemVal);
    updateMcDItemReferences();
    populateMrktReferences(McDitem, node, "ItemToMarketCategory");
    //populateMrktReferences(McDitem, node,"ItemToMarketExtension");
    populateMcDRef();

    var currentDate = new Date().toISOString().slice(0, 10);
    currentDate = currentDate + " 00:00:00";
    var user = step.getCurrentUser().getID();

    McDitem.getValue("CreatedBy").setSimpleValue(user);
    McDitem.getValue("CreatedOn").setSimpleValue(currentDate);
    populateItemToSupplier(McDitem);

    //McDitem Approve		


    //Calling CUOM Code for Calculating Imperial adn Metric Values(MDRI-1188).
    cuom.cuom(node, step, logger);
    //McDitem.approve(); 0413
}

function populateItemToSupplier(McDitem) {

    var PackCaseToSupplierArray;
    var PackCaseToSupplierRefObj;
    var itemTOSupplierRefObj
    var McDitem;
    logger.info("-_-_-populateItemToSupplier-_-_-");
    //Quality Change - start
    var itemSupplierRefType = McDitem.getValue("REF_ItemToSupplier").getSimpleValue() + "";
    var McDitemArray = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("PackToMcDonaldItem")).toArray();
    PackCaseToSupplierArray = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID(itemSupplierRefType)).toArray();
    //Quality Change - end
    var FacNamesSet = new java.util.TreeSet();
    var supplierID;
    var supplierName;

    if (McDitemArray.length > 0) {
        McDitem = McDitemArray[0].getTarget();
        logger.info("McDitem = " + McDitem + "-_-_-_-_-_-_-" + PackCaseToSupplierArray[0].getTarget());
        if (PackCaseToSupplierArray.length > 0) {
            try {
                PackCaseToSupplierRefObj = McDitem.createReference(PackCaseToSupplierArray[0].getTarget(), itemSupplierRefType);
                //MDSIM-3397 (Defect - 3839)
                PackCaseToSupplierRefObj.getValue("SIM_Identifier").setSimpleValue(numGenLib.getCustomID(PackCaseToSupplierArray[0].getTarget(), step, logger));

            } catch (e) {
                throw e;
            }

            //refObj.getValue('Facility_MFG_SSP').setSimpleValue(PackCaseToSupplierArray[0].getValue('Facility_MFG_SSP').getSimpleValue());
            var Facility_MFG_SSP = PackCaseToSupplierArray[0].getValue('Facility_MFG_SSP').getSimpleValue();
            logger.info("-_-_-Facility_MFG_SSP-_-_-_-" + Facility_MFG_SSP);
            var facilityName = PackCaseToSupplierArray[0].getValue('ItemFacilityName').getSimpleValue();
            logger.info("facilityName ==========" + facilityName);
            var Facility_MFG_SSP_Split = Facility_MFG_SSP.split('<multisep/>');
            for (var k = 0; k < Facility_MFG_SSP_Split.length; k++) {

                var facid = Facility_MFG_SSP_Split[k];
                logger.info("-_-_-facid-_-_-" + facid.contains("\\/"));

                if (facid.contains("\\/")) {
                    var facid_Split = facid.split('<multisep/>');
                    for (var k1 = 0; k1 < facid_Split.length; k1++) {
                        logger.info(facid_Split[k1] + "-_-_-_-indise if-_-_-_-" + facid);
                        FacNamesSet.add(facid_Split[k1]);
                    }
                } else {
                    logger.info("-_-_-_-indise lse-_-_-_-" + facid);
                    FacNamesSet.add(facid);
                }

            }
            //Quality Change - start
            var itemSupplierRefType = node.getValue("REF_ItemToSupplier").getSimpleValue() + "";
            var itemTOSupplierRefObjArray = McDitem.getReferences(step.getReferenceTypeHome().getReferenceTypeByID(itemSupplierRefType)).toArray();
            //Quality Change - end
            for (var counter1 = 0; counter1 < PackCaseToSupplierArray.length; counter1++) {
                var pkItemtoSupplier = PackCaseToSupplierArray[counter1].getTarget().getID();
                logger.info("-_-_-pkItemtoSupplier-_-_-" + pkItemtoSupplier);
                if (itemTOSupplierRefObjArray.length > 0) {
                    logger.info("-_-_-itemTOSupplierRefObjArray-_-_-" + itemTOSupplierRefObjArray.length);

                    for (var counter = 0; counter < itemTOSupplierRefObjArray.length; counter++) {
                        var itemTOSupplierRefObjArray1 = itemTOSupplierRefObjArray[counter].getTarget().getID();
                        var itemTOSupplierRefObjref = itemTOSupplierRefObjArray[counter].getTarget();

                        if (pkItemtoSupplier == itemTOSupplierRefObjArray1) {
                            logger.info(itemTOSupplierRefObjArray1 + "-_-_-_-McDitem1-_-suresh-_-" + itemTOSupplierRefObjref);
                            //start

                            var Facility_MFG_SSP1 = itemTOSupplierRefObjArray[counter].getValue('Facility_MFG_SSP').getSimpleValue();
                            logger.info("-_-y-_-" + Facility_MFG_SSP1);
                            if (null != Facility_MFG_SSP1) {
                                logger.info("-_-y1-_-");
                                var Facility_MFG_SSP_Split1 = Facility_MFG_SSP1.split('<multisep/>');
                                for (var k3 = 0; k3 < Facility_MFG_SSP_Split1.length; k3++) {

                                    var facid1 = Facility_MFG_SSP_Split1[k3];
                                    logger.info("-_-_-facid1-_-_-" + facid1.contains("\\/"));

                                    if (facid1.contains("\\/")) {
                                        var facid_Split1 = facid1.split('<multisep/>');
                                        for (var k2 = 0; k2 < facid_Split1.length; k2++) {
                                            logger.info(facid_Split1[k2] + "-_-_-_-indise if-1-_-_-" + facid1);
                                            FacNamesSet.add(facid_Split1[k2]);
                                        }
                                    } else {
                                        logger.info("-_-_-_-indise lse-_-_-1-" + facid1);
                                        FacNamesSet.add(facid1);
                                    }

                                }
                            }
                            //ended


                            //READING FROM TE MCD IS COMPLETED
                            logger.info("-_-y2-_-" + FacNamesSet.size());
                            var FacNamesList = new java.util.ArrayList(FacNamesSet);
                            logger.info(itemTOSupplierRefObjArray1 + "-_-_-FacNamesList-_-_-_-" + FacNamesList.size());
                            itemTOSupplierRefObjArray[counter].getValue('Facility_MFG_SSP').setSimpleValue("");
                            for (var c = 0; c < FacNamesList.size(); c++) {
                                logger.info("-_-_-_-Adding -_-_-_-" + FacNamesList.get(c));
                                itemTOSupplierRefObjArray[counter].getValue('Facility_MFG_SSP').addValue(FacNamesList.get(c));
                            }
                            //itemTOSupplierRefObjArray[counter].getValue("ItemFacilityName").addValue(facilityName);
                        }
                    }
                }
            }

            logger.info("-_-_-final while-_-_-_-");


        }
    }
}

function getMcDItem() {
    var facilityrefID = null;

    var nodereferences = node.getReferences().asSet().iterator();
    while (nodereferences.hasNext()) {
        var reference1 = nodereferences.next();
        if (reference1.getReferenceType() == "TempObjToItem") {
            var facilityref = reference1.getTarget().getID();
            facilityrefID = step.getProductHome().getProductByID(facilityref);
        }
    }
    return facilityrefID
}

function updateMcDItemReferences() {

    logger.info("In 1st Function.,.");
    var marketExtensionRef = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketCategory");
    var marketExtensionRefObj = node.getReferences(marketExtensionRef);

    for (var i = 0; i < marketExtensionRefObj.size(); i++) {
        var market = marketExtensionRefObj.get(i).getTarget().getID();
        var marketName = marketExtensionRefObj.get(i).getTarget().getName();
        var marketID = step.getEntityHome().getEntityByID(market);
        var status = marketExtensionRefObj.get(i).getValue("SupplierItemMktApprovalStatus").getSimpleValue();
        var ItemLocalNumber = marketExtensionRefObj.get(i).getValue("ItemLocalNumber").getSimpleValue();
        logger.info(market + "-Before updateMcDItemReferences-" + status);
        setMcdReferences(marketName, marketID, status, ItemLocalNumber);
        logger.info(market + "-After updateMcDItemReferences-" + status);
    }
}

function getpack() {
    var pack = "";
    if (objTypeID == "McDTargetMarketTempObject") {
        var packnRef = step.getReferenceTypeHome().getReferenceTypeByID("TempObjToItem");
        var packRefObj = node.getReferences(packnRef);

        for (var i = 0; i < packRefObj.size(); i++) {
            var packID = packRefObj.get(i).getTarget().getID();
            pack = step.getProductHome().getProductByID(packID);
            logger.info("packID-" + packID);
        }
    } else {
        pack = node;
        logger.info("IN JEFFAA:" + pack);
    }
    return pack;
}

function setMcdReferences(marketName, marketID, status, ItemLocalNumber) {

    var pack = getpack();

    if (pack != null) {
        //pack.getValue("TradeItemStatus").setSimpleValue("Active");
        var itemRef = step.getReferenceTypeHome().getReferenceTypeByID("PackToMcDonaldItem");
        var itemRefObj = pack.getReferences(itemRef);
        logger.info("SIZE:" + itemRefObj);
        for (var i = 0; i < itemRefObj.size(); i++) {
            var itemID = itemRefObj.get(i).getTarget().getID();
            var item = step.getProductHome().getProductByID(itemID);
            logger.info(marketID + "111 IS:" + itemID);
            logger.info(item + "222 IS:" + status);
            if (item != null && marketID !== null && (status != "Inactive")) {
                try {
                    var refCreated = item.createReference(marketID, "ItemToMarketCategory");
                    logger.info(refCreated + "-333 IS:-" + marketID);
                    refCreated.getValue("SupplierItemMktApprovalStatus").setSimpleValue(status);
                    if (ItemLocalNumber != "" && ItemLocalNumber != null) {

                        refCreated.getValue("ItemLocalNumber").setSimpleValue(ItemLocalNumber);

                    }
                    var parsedDate = getCurrentDate.getCurrentDateInHHMMSS();
                    refCreated.getValue("DataTeamOnEntryCreatedOn").setSimpleValue(parsedDate);
                    refCreated.getValue("DataTeamOnExitCreatedOn").setSimpleValue(parsedDate);
                } catch (e) {
                    logger.info("refCreatedException" + e);
                    throw e;
                }
            }
        }
    }
}

function delRejectReference(tempobj) {

    var objType = node.getObjectType().getID();
    var ReferenceType = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketCategory");
    if (ReferenceType != null) {
        var ReferenceTypes = node.getReferences(ReferenceType);
        if (ReferenceTypes.size() > 0) {
            for (var i = 0; i < ReferenceTypes.size(); i++) {
                var reference1 = ReferenceTypes.get(i);
                var facility = reference1.getTarget().getID();
                var references = tempobj.getReferences().asSet().iterator();
                while (references.hasNext()) {
                    var reference = references.next()
                    if ((reference.getReferenceType() == "ItemToMarketExtension")) {
                        var marketid = reference.getTarget().getID();
                        var marketName = reference.getTarget().getName();
                        var status = reference.getValue("MarketExtensionStatus").getSimpleValue();

                        if (objType == "McDonaldItem") {
                            if ((status == "Reject" || status == "Pending Facility Approval") && (facility == marketid)) {
                                if (status == "Reject")
                                    reference1.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Rejected");
                                else if (status == "Pending Facility Approval")
                                    reference1.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Pending Facility Approval");
                                reference.delete();
                                logger.info(facility + "IF DELETED-_-" + status);
                                email.generateEmailForRejection(node, step, mailer, logger, formattedEmail, "Global Category Manager", marketName);
                            } else if ((status == "Approve") && (facility == marketid)) {
                                reference1.getValue("SupplierItemMktApprovalStatus").setSimpleValue("Active");
                            }
                        }
                    }
                }
            }
        }
    }
}


function marketFacilityCheck(Facility) {
    var market = "";
    var markRef = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketCategory");
    var markRefObj = node.getReferences(markRef);

    for (var i = 0; i < markRefObj.size(); i++) {
        market = markRefObj.get(i).getTarget().getID();
    }

    var matchFound = 0;
    var userCategory = node.getValue("ProductCategory").getSimpleValue();
    //Quality Change - start
    var facilityCategoryRefType = "SIM_Facility_To_Category";
    var facCatRef = step.getReferenceTypeHome().getReferenceTypeByID(facilityCategoryRefType);
    //Quality Change - end
    var facCatRefObj = Facility.getReferences(facCatRef);
    for (var i = 0; i < facCatRefObj.size(); i++) {
        var catID = facCatRefObj.get(i).getTarget().getID();
        var category = facCatRefObj.get(i).getValue("SIM_Category_Name").getSimpleValue();
        var targetMarket = facCatRefObj.get(i).getValue("SIM_Market_Name").getSimpleValue();
        var facilityRefApprovalStatus = facCatRefObj.get(i).getValue("SIM_Approval_Status").getSimpleValue();

        if (userCategory == category && ((facilityRefApprovalStatus == "Approved") || (facilityRefApprovalStatus == "Probation") || (facilityRefApprovalStatus == "Onboarding")) && targetMarket == market) {
            //logger.info("-_-matchFound Against With facility & Market -_-");						
            matchFound = 1;
        }
    }
    logger.info(market + "-FACandMARKET-" + matchFound);
    return matchFound;
}




function deletepackreferences() {
    var pack = "";
    var objectType = node.getObjectType().getID();
    logger.info("objectType-" + objectType);
    if (objectType == "McDTargetMarketTempObject") {
        var references = node.getProductReferences().asSet().iterator();
        while (references.hasNext()) {
            var reference = references.next();
            if (reference.getReferenceType() == "TempObjToItem") {
                logger.info("-_-_-Inside TempObjToItem-_-_-_-_-_-_-_-");
                var mcdNodeID = reference.getTarget().getID();
                var mcdNode = step.getProductHome().getProductByID(mcdNodeID);
                pack = mcdNode;
            }
        }
    } else {
        pack = node;
    }
    logger.info("pack-" + pack);

    var tempRef = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketExtension");
    var tempRefObj = pack.getReferences(tempRef);
    logger.info(pack + "-No of Markets-" + tempRefObj.size());
    for (var counter = 0; counter < tempRefObj.size(); counter++) {
        var refType = tempRefObj.get(counter);
        refType.delete();
    }

    //Quality Change - start
    var itemFacilityExtRefType = node.getValue("REF_ItemToFacilityExtension").getSimpleValue() + "";
    var itemFacilityRefType = node.getValue("REF_ItemToFacility").getSimpleValue() + "";
    var facilityRef = step.getReferenceTypeHome().getReferenceTypeByID(itemFacilityExtRefType);
    //Quality Change - end
    var facilityRefObj = pack.getReferences(facilityRef);
    logger.info("No of Facilities:" + facilityRefObj.size());
    for (var k = 0; k < facilityRefObj.size(); k++) {
        var facility = facilityRefObj.get(k).getTarget().getID();
        reference1 = facilityRefObj.get(k);
        var facilityobj = step.getEntityHome().getEntityByID(facility);
        var Market_Status = reference1.getValue("FacilityApprovedCategory_Market_Status").getSimpleValue();
        var FacilityType = reference1.getValue("FacilityType").getSimpleValue();
        var IsShipPoint = reference1.getValue("IsShipPoint").getSimpleValue();
        var SupplierID = reference1.getValue("SupplierID").getSimpleValue();
        var SupplierName = reference1.getValue("SupplierName").getSimpleValue();
        var ItemShippedFacility = reference1.getValue("ItemShippedFacility").getSimpleValue();
        var ItemManufacturingPoint = reference1.getValue("ItemManufacturingPoint").getSimpleValue();
        try {
            var referenced = pack.createReference(facilityobj, itemFacilityRefType);
            if (null != Market_Status) {
                referenced.getValue("FacilityApprovedCategory_Market_Status").setSimpleValue(Market_Status);
            }
            if (null != FacilityType) {
                referenced.getValue("FacilityType").setSimpleValue(FacilityType);
            }
            if (null != IsShipPoint) {
                referenced.getValue("IsShipPoint").setSimpleValue(IsShipPoint);
            }
            if (null != SupplierID) {
                referenced.getValue("SupplierID").setSimpleValue(SupplierID);
            }
            if (null != SupplierName) {
                referenced.getValue("SupplierName").setSimpleValue(SupplierName);
            }
            if (null != ItemShippedFacility) {
                referenced.getValue("ItemShippedFacility").setSimpleValue(ItemShippedFacility);
            }
            if (null != ItemManufacturingPoint) {
                referenced.getValue("ItemManufacturingPoint").setSimpleValue(ItemManufacturingPoint);
            }
            facilityRefObj.get(k).delete();
        } catch (e) {
            logger.info("Exception while addig ItemToFacility reference for Pack/Case." + e);
            throw e;
        }
    }
}

function populateMrktReferences(McDitem, node, refType) {
    var ReferenceType = step.getReferenceTypeHome().getReferenceTypeByID(refType);
    if (ReferenceType != null) {
        var ReferenceTypes = node.getReferences(ReferenceType);
        if (ReferenceTypes.size() > 0) {
            for (var i = 0; i < ReferenceTypes.size(); i++) {
                var reference1 = ReferenceTypes.get(i);
                var targetMarketID = reference1.getTarget().getID();
                var targetMarketName = reference1.getTarget().getName();
                createfacilityReferenceLib.createfacilityReferenceformrkt(node, step, logger, McDitem, refType, targetMarketName);
            }
        }
    }
}


function populateMcDRef() {
    var McDIDRef;
    var references = node.getProductReferences().asSet().iterator();
    while (references.hasNext()) {
        var reference = references.next();
        if (reference.getReferenceType() == "PackToMcDonaldItem") {
            var McDID = reference.getTarget().getID();
            McDIDRef = step.getProductHome().getProductByID(McDID);
            logger.info("-_-_-McDIDRef-_-_-_-" + McDIDRef);
        }
    }
    var references = node.getReferencedByProducts().toArray();
    if (references.length > 0) {
        for (var i = 0; i < references.length; i++) {
            if ((references[i].getReferenceType() == "TempObjToItem")) {
                var tempObj = references[i].getSource().getID();
                var formattedTempObjectsRef = step.getProductHome().getProductByID(tempObj);
                formattedTempObjectsRef.createReference(McDIDRef, "TempObjectToMcD");
            }
        }
    }
}



function generateMaxWrinSuffixForPromotion(WRINPrefixVal, mcdItem) {
    logger.info("-In generateMaxWrinSuffixForPromotion-" + Gender);
    var suffixSet = new java.util.TreeSet();
    //Step 1::::: Check Whether WRINPrefixVal is already congigured in 
    var prefixFound = 0;
    var maxSuffix = 0;

    // ***** Concurrency Started
    if (IsPrefixMigrated == "Yes") {
        prefixFound = 1;
    } else {
        prefixFound = 0;
    }
    logger.info("-_-_-_-_-_-" + prefixFound);
    // ***** Concurrency Ended

    /* Concurrency remove
    var PrefixesMigrated = step.getProductHome().getProductByID("McDonaldRawItem").getValue("PrefixesMigrated").getSimpleValue();
    if (null != PrefixesMigrated)
    {
    		var PrefixesMigratedSplit = PrefixesMigrated.split('<multisep/>');
    		for (var i = 0; i < PrefixesMigratedSplit.length; i++)
    		{
    				var fetchPrefix = PrefixesMigratedSplit[i];
    				if (WRINPrefixVal == fetchPrefix)
    				{
    						prefixFound = 1;
    				}
    		}
    }
    logger.info("-_-_-_-_-_-"+prefixFound);*/

    if (prefixFound == 0) {
        var ValuesInLov = step.getListOfValuesHome().getListOfValuesByID("WRINPrefixSuffixMax").getListOfValuesValueByID(WRINPrefixVal);
        var prefixSuffixMax;
        var prefixSuffixSplit;
        var prefixStr;

        if (ValuesInLov != null) {
            logger.info("-_-_-ValuesInLov-_-_-" + ValuesInLov.getValue());
            prefixSuffixMax = ValuesInLov.getValue();
            prefixSuffixSplit = prefixSuffixMax.split("-");
            prefixStr = prefixSuffixSplit[0];
            maxSuffix = prefixSuffixSplit[1];
            logger.info("-_-_-maxSuffix-_-_-" + maxSuffix);

            if (Gender != "Unisex") {
                if (maxSuffix % 2 == 0) {
                    if (Gender == "Boy") {
                        suffixVal = Number(maxSuffix) + 1;
                    } else if (Gender == "Girl") {
                        suffixVal = Number(maxSuffix) + 2;
                    }
                } else {
                    if (Gender == "Girl") {
                        suffixVal = Number(maxSuffix) + 1;
                    } else if (Gender == "Boy") {
                        suffixVal = Number(maxSuffix) + 2;
                    }
                }
                logger.info("-_-_-suffixVal-_-_-" + suffixVal);
                logger.info("-_-_-Gender-_-_-" + Gender);
            } else {
                suffixVal = Number(maxSuffix) + 1;
            }
        } else {
            if (Gender == "Boy") {
                suffixVal = "001";
            } else {
                suffixVal = "000";
            }
        }

        /* Concurrency remove
        var PrefixesMigrated = step.getProductHome().getProductByID("McDonaldRawItem").getValue("PrefixesMigrated").getSimpleValue();
        step.getProductHome().getProductByID("McDonaldRawItem").getValue("PrefixesMigrated").addValue(WRINPrefixVal);*/

        mcdProdReference.getValue("IsPrefixMigrated").setSimpleValue("Yes");
    } else if (prefixFound == 1) {
        var ValuesInLov = step.getListOfValuesHome().getListOfValuesByID("WRINPrefixSuffixMax").getListOfValuesValueByID(WRINPrefixVal);
        logger.info("-ValuesInLov-_-_->>>" + ValuesInLov);
        var prefixSuffixMax;
        var prefixSuffixSplit;
        var prefixStr;
        var temp = 0;

        WRINPrefixVal = appendZeros(WRINPrefixVal + "", 5);

        /*  var WRINNumResults = new java.util.ArrayList();
        var calWRINPrefixAtrribute = step.getAttributeHome().getAttributeByID("WRINPrefix");
        var searchQuery = new com.stibo.core.domain.singleattributequery.SingleAttributeQueryHome.SingleAttributeQuerySpecification(com.stibo.core.domain.Product, calWRINPrefixAtrribute, WRINPrefixVal);
        WRINNumResults = step.getHome(com.stibo.core.domain.singleattributequery.SingleAttributeQueryHome).querySingleAttribute(searchQuery).asList(1000);
        logger.info("-searchResults MAX-_-_->>>" + WRINNumResults.size()); */

        //Added for Production Fix started 032320108, replacement of above limitation for INC9604119.
        var McDProdRef = step.getReferenceTypeHome().getReferenceTypeByID("PackCaseToAI");
        var McDProdRefObj = node.getReferences(McDProdRef);
        var mcdProduct = null;

        for (var p = 0; p < McDProdRefObj.size(); p++) {
            mcdProduct = McDProdRefObj.get(p).getTarget();
        }

        var childrens = mcdProduct.getChildren();
        var productSet = new java.util.TreeSet();

        logger.info("-childrens-" + childrens.size());
        for (var v = 0; v < childrens.size(); v++) {
            var Child = childrens.get(v);
            productSet.add(Child);
        }

        var WRINNumResults = new java.util.ArrayList(productSet);
        logger.info("-After addin-" + WRINNumResults.size());
        //Added for Prodcution Fix Ended.				


        if (WRINNumResults != null && WRINNumResults.size() > 0) {
            for (var v_ctr = 0; v_ctr < WRINNumResults.size(); v_ctr++) {
                var v_mcDitem = WRINNumResults.get(v_ctr);
                var v_mcDitem_val = v_mcDitem.getID();
                var packsubstr = v_mcDitem_val.substring(0, 2);
                if (packsubstr == "SI" && v_mcDitem_val != mcdItem.getID()) {
                    var wrinSuffix = v_mcDitem.getValue("WRINSuffix").getSimpleValue();
                    //logger.info("-wrinSuffix-_-_->>>" + wrinSuffix);
                    if (wrinSuffix != null) {
                        suffixSet.add(wrinSuffix);
                    }
                }
            }
        }

        //var Gender = node.getValue("Gender").getSimpleValue();					
        var suffixVal = 0;
        var suffixValIncrement = "";
        var suffixList = new java.util.ArrayList();

        if (ValuesInLov != null) {
            prefixSuffixMax = ValuesInLov.getValue();
            prefixSuffixSplit = prefixSuffixMax.split("-");
            prefixStr = prefixSuffixSplit[0];
            maxSuffix = prefixSuffixSplit[1];
            logger.info("-In IF ValuesInLov-" + suffixValIncrement);
            suffixValIncrement = maxSuffix;
            logger.info("-In IF ValuesInLov2-" + suffixValIncrement);
            suffixSet.add(maxSuffix);
            suffixList = new java.util.ArrayList(suffixSet);

            for (var i = 0; i <= suffixList.size(); i++ && temp == 0) {
                //logger.info(suffixValIncrement+"-_-_-_-_-suffixList temp1 -_-_-_-_-_-_-_-_-"+temp);
                if (Gender == "Boy" && temp == 0) {
                    if (suffixValIncrement % 2 == 0) {
                        suffixValIncrement = Number(suffixValIncrement) + 1;
                    } else {
                        suffixValIncrement = Number(suffixValIncrement) + 2;
                    }
                } else if (Gender == "Girl" && temp == 0) {
                    if (suffixValIncrement % 2 == 0) {
                        suffixValIncrement = Number(suffixValIncrement) + 2;
                    } else {
                        suffixValIncrement = Number(suffixValIncrement) + 1;
                    }
                } else if (Gender == "Unisex" && temp == 0) {

                    suffixValIncrement = Number(suffixValIncrement) + 1;
                    //logger.info("-_-_-_-_-suffixValIncrement-_-_-_-_-_-_-_-_-"+suffixValIncrement);
                }

                var matchfound = 0;
                for (var counter = 0; counter < suffixList.size(); counter++) {
                    var suffValue = suffixList.get(counter);

                    if (suffValue == suffixValIncrement) {
                        matchfound = 1;
                    }
                    //logger.info("-matchfound-"+matchfound);
                }
                if ((matchfound == 0) && temp == 0) {
                    //logger.info(suffixValIncrement+"-_-_-_-_-suffixList before -_-_-_-_-_-_-_-_-"+suffixList+"-temp-"+temp);
                    temp = 1;
                    suffixVal = suffixValIncrement;
                }
            }
        } else {
            //logger.info("-In Else ValuesInLov-"+suffixValIncrement);
            suffixList = new java.util.ArrayList(suffixSet);
            var valIncrement = 0;

            if (suffixList.size() > 0 && suffixList.get(0) == "000") {
                valIncrement = 1;
                suffixValIncrement = "000";
            } else if (suffixList.size() > 0 && suffixList.get(0) == "001") {
                valIncrement = 1;
                suffixValIncrement = "001";
            }

            for (var i = 0; i <= suffixList.size(); i++ && temp == 0) {

                if (Gender == "Boy" && temp == 0) {

                    if (suffixValIncrement % 2 == 0) {

                        suffixValIncrement = Number(suffixValIncrement) + 1;
                    } else {
                        suffixValIncrement = Number(suffixValIncrement) + 2;
                    }

                } else if (Gender == "Girl" && temp == 0) {
                    if (valIncrement == "1") {
                        if (suffixValIncrement % 2 == 0) {
                            suffixValIncrement = Number(suffixValIncrement) + 2;
                        } else {
                            suffixValIncrement = Number(suffixValIncrement) + 1;
                        }
                    }
                } else if (Gender == "Unisex" && temp == 0 && valIncrement == "1") {
                    suffixValIncrement = Number(suffixValIncrement) + 1;
                    logger.info("-_-_-_-_-suffixValIncrement-_-_-_-_-_-_-_-_-" + suffixValIncrement);
                }


                var matchfound = 0;
                for (var counter = 0; counter < suffixList.size(); counter++) {
                    var suffValue = suffixList.get(counter);

                    if (suffValue == suffixValIncrement) {
                        matchfound = 1;
                    }
                    //logger.info("-matchfound-"+matchfound);
                }
                if ((matchfound == 0) && temp == 0) {
                    //logger.info(suffixValIncrement+"-_-_-_-_-suffixList before -_-_-_-_-_-_-_-_-"+suffixList+"-temp-"+temp);
                    temp = 1;
                    suffixVal = suffixValIncrement;
                }
            }

            if (temp == 0 && Gender == "Girl") {
                //logger.info("-In tempSuffix Last If Girl temp-" + temp);
                if (maxSuffix == "") {
                    suffixVal = "000";
                } else {
                    if (maxSuffix % 2 == 0) {
                        suffixVal = maxSuffix + 2;
                    } else {
                        suffixVal = maxSuffix + 1;
                    }
                }
            } else if (temp == 0 && Gender == "Boy") {
                logger.info("-In tempSuffix Last else Boy temp-" + temp);
                if (maxSuffix == "") {
                    suffixVal = "001";
                } else {
                    if (maxSuffix % 2 != 0) {
                        suffixVal = maxSuffix + 2;
                    } else {
                        suffixVal = maxSuffix + 1;
                    }
                }
            }
        }

    }
    suffixVal = getTheUnusedSuffix(WRINPrefixVal, suffixVal, mcdItem, Gender);
    return suffixVal;

}

function setWRINtoTempObjects() {
    var references = node.getReferencedByProducts().toArray();
    logger.info("-_-_-_-_-_-_-_-references-_-_-_-_-_-_-" + references.length);
    if (references.length > 0) {
        for (var i = 0; i < references.length; i++) {
            if ((references[i].getReferenceType() == "TempObjToItem")) {
                var tempObj = references[i].getSource().getID();
                var formattedTempObjectsRef = step.getProductHome().getProductByID(tempObj);
                logger.info("-_-_-_-_-_-_-_-_-_-_-_-_-_-_-" + formattedTempObjectsRef);
                formattedTempObjectsRef.getValue("WRINPrefix").setSimpleValue(node.getValue("WRINPrefix").getSimpleValue());
                formattedTempObjectsRef.getValue("WRINSuffix").setSimpleValue(node.getValue("WRINSuffix").getSimpleValue());
                formattedTempObjectsRef.getValue("WRINNUMBER").setSimpleValue(node.getValue("WRINNUMBER").getSimpleValue());
            }
        }
    }
}


function getMcDItemByPackaging() {
    var nodereferences = node.getReferences().asSet().iterator();
    while (nodereferences.hasNext()) {
        var reference1 = nodereferences.next();
        if (reference1.getReferenceType() == "PackToMcDonaldItem") {
            var mcdID = reference1.getTarget().getID();
            McDitem = step.getProductHome().getProductByID(mcdID);
        }
    }
    return McDitem;
}

// **************** Coding for WRIN Suffix Gaps Started ********************


function checkPrefSufFoundForNonPromotions(wrinPrefix, fetchPrefixSuffix) {
    logger.info("-_-_-_-checkPrefSufFoundForNonPromotions-_-_-" + fetchPrefixSuffix);
    var WRINVal = wrinPrefix.concat(fetchPrefixSuffix);
    logger.info("-WRINVal addin-" + WRINVal);
    var WRINNumResults = new java.util.ArrayList(1000);
    logger.info("-before addin-" + WRINNumResults.size());
    var calWRINAtrribute = step.getAttributeHome().getAttributeByID("WRINNUMBER");
    var searchQuery = new com.stibo.core.domain.singleattributequery.SingleAttributeQueryHome.SingleAttributeQuerySpecification(com.stibo.core.domain.Product, calWRINAtrribute, WRINVal);
    WRINNumResults = step.getHome(com.stibo.core.domain.singleattributequery.SingleAttributeQueryHome).querySingleAttribute(searchQuery).asList(1000);
    logger.info("-searchResults MAX-_-_-" + WRINNumResults.size());

    logger.info("-After addin-" + WRINNumResults.size());
    //Added for Prodcution Fix Ended.
    if (WRINNumResults != null && WRINNumResults.size() > 0) {
        logger.info("-In IF Loop>0-_-_-" + WRINNumResults.size());
        logger.info(fetchPrefixSuffix.concat(",") + "-bef MissingSuffixesForPrefix-" + MissingSuffixesForPrefix);
        MissingSuffixesForPrefix = MissingSuffixesForPrefix.replace(fetchPrefixSuffix.concat(","), "");
        logger.info("-af MissingSuffixesForPrefix-" + MissingSuffixesForPrefix);
        mcdProdReference.getValue("MissingSuffixesForPrefix").setSimpleValue(MissingSuffixesForPrefix);
        matchFound1 = 0;
    } else {
        matchFound1 = fetchPrefixSuffix;
        logger.info(fetchPrefixSuffix.concat(",") + "-bef MissingSuffixesForPrefix-" + MissingSuffixesForPrefix);
        MissingSuffixesForPrefix = MissingSuffixesForPrefix.replace(fetchPrefixSuffix.concat(","), "");
        logger.info("-af MissingSuffixesForPrefix-" + MissingSuffixesForPrefix);
        mcdProdReference.getValue("MissingSuffixesForPrefix").setSimpleValue(MissingSuffixesForPrefix);
    }


    logger.info("-In return matchFound1-_-" + matchFound1);
    return matchFound1;
}

function checkPrefSufFoundForPromotions(wrinPrefix, fetchPrefixSuffix) {
    var counter = 0
    logger.info("-_-_-_-checkPrefSufFoundForPromotions-_-_-" + fetchPrefixSuffix);
    var WRINVal = wrinPrefix.concat(fetchPrefixSuffix);
    logger.info("-WRINVal addin-" + WRINVal);
    var WRINNumResults = new java.util.ArrayList(1000);
    logger.info("-before addin-" + WRINNumResults.size());
    var calWRINAtrribute = step.getAttributeHome().getAttributeByID("WRINNUMBER");
    var searchQuery = new com.stibo.core.domain.singleattributequery.SingleAttributeQueryHome.SingleAttributeQuerySpecification(com.stibo.core.domain.Product, calWRINAtrribute, WRINVal);
    WRINNumResults = step.getHome(com.stibo.core.domain.singleattributequery.SingleAttributeQueryHome).querySingleAttribute(searchQuery).asList(1000);
    logger.info("-searchResults MAX-_-_-" + WRINNumResults.size());

    logger.info("-After addin-" + WRINNumResults.size());
    //Added for Prodcution Fix Ended.
    if (WRINNumResults != null && WRINNumResults.size() > 0) {
        logger.info("-In IF Loop>0-_-_-" + WRINNumResults.size());
        counter++;
        logger.info(fetchPrefixSuffix.concat(",") + "-Before MissingSuffixesForPrefix-" + MissingSuffixesForPrefix);
        MissingSuffixesForPrefix = MissingSuffixesForPrefix.replace(fetchPrefixSuffix.concat(","), "");
        logger.info("-After MissingSuffixesForPrefix-" + MissingSuffixesForPrefix);
        mcdProdReference.getValue("MissingSuffixesForPrefix").setSimpleValue(MissingSuffixesForPrefix);
    }
    logger.info(counter + "-_-_-Gender-_-_-" + Gender);
    if (counter == 0) {
        if (Gender == "Boy") {
            if (fetchPrefixSuffix % 2 != 0) {
                return fetchPrefixSuffix;
            } else {
                matchFound1Suffix = 0;
                return matchFound1Suffix;
            }
        } else if (Gender == "Girl") {
            if (fetchPrefixSuffix % 2 == 0) {
                return fetchPrefixSuffix;
            } else {
                matchFound1Suffix = 0;
                return matchFound1Suffix;
            }
        } else {
            return fetchPrefixSuffix;
        }
        logger.info("-_-_-fetchPrefixSuffix-_-_-" + fetchPrefixSuffix);
    } else {
        matchFound1Suffix = 0;
        logger.info("-_-_-matchFound1Suffix-_-_-" + matchFound1Suffix);
        return matchFound1Suffix;
    }
}
logger.info("-Last-" + node.getValue("WRINNUMBER").getSimpleValue());
// **************** Coding for WRIN Suffix Gaps Ended ********************


function getMcDItem(tempObj) {
    var facilityrefID = null;
    var nodereferences = tempObj.getReferences().asSet().iterator();
    while (nodereferences.hasNext()) {
        var reference1 = nodereferences.next();
        if ((reference1.getReferenceType() == "TempObjToItem") || (reference1.getReferenceType() == "PackToMcDonaldItem")) {
            var facilityref = reference1.getTarget().getID();
            facilityrefID = step.getProductHome().getProductByID(facilityref);
        }
    }
    return facilityrefID
}

// Below code is added to ensure that Found Suffix + Given Prefix 
// is not already  associated with a WRIN
function getTheUnusedSuffix(WRINPrefixVal, WRINSuffixVal, mcdItem, gender) {
    var increment;

    if (gender == null || gender == "Unisex") {
        increment = 1;
    } else if (gender == "Boy" || gender == "Girl") {
        increment = 2;
    }
    var counter = WRINSuffixVal;
    logger.info("Inside getTheUnusedSuffix ");
    for (; counter <= 999; counter += increment) {

        if (step.getEntityHome().getObjectByKey("GTINWRIN", appendZeros(WRINPrefixVal + "", 5) + appendZeros(counter + "", 3)) == null) {
            logger.info("Return Value from here ..... is " + counter);
            return counter;
        }

    }

    return counter; //MDSIM-5449: Defect MDSIM-5587

}
  </javaScript>
</config>
Action #3 (JavaScriptBusinessActionWithBinds):
<config>
  <bindings>
    <binding alias="node" type="Node" contract="CurrentObjectBindContract"/>
    <binding alias="step" type="Manager" contract="ManagerBindContract"/>
    <binding alias="logger" type="Logger" contract="LoggerBindContract"/>
    <binding alias="mailer" type="MailHome" contract="MailHomeBindContract"/>
  </bindings>
  <messages/>
  <javaScript>
//********************** 3 ***************************

var parsedDate=getCurrentDate.getCurrentDateInHHMMSS();
var ItemToMarketCategoryRef = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketCategory")).toArray();
var parsedDate=getCurrentDate.getCurrentDateInHHMMSS();
for(var i=0;i<ItemToMarketCategoryRef.length;i++)
{
   var CurrentRef = ItemToMarketCategoryRef[i];
   CurrentRef.getValue("DataTeamOnExitCreatedOn").setSimpleValue(parsedDate);						  
}

var nodereferences = node.getReferences().asSet().iterator();
while (nodereferences.hasNext())
{
   var reference1 = nodereferences.next();
   if (reference1.getReferenceType() == "PackToMcDonaldItem")
   {
		var mcdID = reference1.getTarget().getID();
       McDitem = step.getProductHome().getProductByID(mcdID);            
       McDitem.getValue("AttributesforWRIN").setSimpleValue(node.getValue("AttributesforWRIN").getSimpleValue())
    
   }
}

marRejected.rejectTargetMarketPopulation(node,step,logger);
var formattedEmail = node.getValue("ContactEmail").getSimpleValue();
var flag=0;
   var ReferenceType = step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketCategory");
    if (ReferenceType != null) {
        var ReferenceTypes = node.getReferences(ReferenceType);
        if (ReferenceTypes.size() > 0) {
            for (var i = 0; i < ReferenceTypes.size(); i++) {
                var reference = ReferenceTypes.get(i);
                var marketid = reference.getTarget().getID();
                var marketName = reference.getTarget().getName();
				 var status = reference.getValue("SupplierItemMktApprovalStatus").getSimpleValue();
				   if ((status == "Rejected")&&(flag==0)){
				   	  flag=1;
					   email.generateEmailForRejection(node, step, mailer, logger, formattedEmail, "Data Team", marketName);
				   }
			}
		}
	}
  </javaScript>
</config>
Action #4 (JavaScriptBusinessActionWithBinds):
<config>
  <bindings>
    <binding alias="node" type="Node" contract="CurrentObjectBindContract"/>
    <binding alias="step" type="Manager" contract="ManagerBindContract"/>
    <binding alias="logger" type="Logger" contract="LoggerBindContract"/>
  </bindings>
  <messages/>
  <javaScript>
//********************** 4 ***************************

var GTIN = node.getValue("GTIN").getSimpleValue();
var IsNewItem = node.getValue("IsNewItem").getSimpleValue();
var GTINPREFIX = node.getValue("GTINPREFIX").getSimpleValue();

var Objtype = node.getObjectType().getID();

var currentDate = new Date().toISOString().slice(0, 10);
currentDate = currentDate + " 00:00:00";
var CurrentUser = step.getCurrentUser().getID();
var objectType1 = node.getObjectType().getID();
logger.info("-_-_-1-_-" + objectType1);
var caseRef, ProgramName1;
var packReferences;
var references = node.getProductReferences().asSet().iterator();
var counter = 0;
var GTINGeneratorRefObj = step.getProductHome().getProductByID("0195500");
var children = GTINGeneratorRefObj.getChildren();

while (references.hasNext()) {
    var reference = references.next();
    if (reference.getReferenceType() == "PackCaseToAI") {
        ProgramName1 = reference.getTarget().getParent().getID();
    }
}

if ((GTIN == null) && ((IsNewItem != null) && (IsNewItem == "Yes"))) {

    var mcdItemRef = getMcDItem(node);
    if (mcdItemRef != null) {
        //Added IF Block as a part of 3173
        if (children.size() > 0) {
            logger.info("-_-_-inside if 444-_-_-" + children.size());
            var fetchOldGTIN = getOldGTINProduct(node, step, logger);
             logger.info("-_-_-fetchOldGTIN if 555-_-_-" + fetchOldGTIN);
            getPackCase(node, fetchOldGTIN.getID());
             logger.info("-_-_-fetchOldGTIN if 4443-_-_-" + fetchOldGTIN);
            mcdItemRef.getValue("GTIN").setSimpleValue(fetchOldGTIN.getID());
            logger.info("-_-_-ffffff-_-_-" );
        } else {
            logger.info("-_-_-inside else -_-_-" + children.size());
            node.getValue("GTINCopies").setSimpleValue("1");
            node.getValue("ProductObjectType").setSimpleValue("Case");
            var fetchGTIN = GTINGEN.generateGTIN(node, step, logger, false);
            logger.info("-_-_-fetchGTIN-_-_-" + fetchGTIN);
            getPackCase(node, fetchGTIN);
            mcdItemRef.getValue("GTIN").setSimpleValue(fetchGTIN);
        }

        //Added IF Block as a part of 3173 Started

        //MDSIM-5271 - start
		var GTIN = null;
		if (objectType1 == "Pack") {
			logger.info("-_-If Pack Object-_-_-_-_-");
			var packReferencesList = node.getReferencedByProducts().toArray();
			for (var ref = 0; ref < packReferencesList.length; ref++) {
				if ((packReferencesList[ref].getReferenceType() == "PackagingCaseToPack")) {
					var caseRefObj = packReferencesList[ref].getSource();
					GTIN = caseRefObj.getValue("GTIN").getSimpleValue();
				}
			}
		}else{
			GTIN = node.getValue("GTIN").getSimpleValue();
		}
		//MDSIM-5271 - end
		
        //var GTIN = node.getValue("GTIN").getSimpleValue();
        var product = step.getProductHome().getProductByID(GTIN);
        if (product != null) {
            product.getValue("IsGTINUsed").setSimpleValue("Yes");
            product.setParent(step.getProductHome().getProductByID("GTINUsed"));
        }
        var PreviousGTIN = node.getValue("PreviousGTIN").getSimpleValue();
        if (GTIN == PreviousGTIN) {
            node.getValue("PreviousMCDGTIN").setSimpleValue(PreviousGTIN);
        }
        //Added IF Block as a part of 3173 Ended       
    }
} else if ((GTIN != null) && ((IsNewItem != null) && (IsNewItem == "Yes"))) {

    logger.info("-_-ProgramName1-_-" + ProgramName1);
    if (objectType1 == "Pack") {
        logger.info("-_-1-_-");
        packReferences = node.getReferencedByProducts().toArray();
        for (var counter = 0; counter < packReferences.length; counter++) {
            if ((packReferences[counter].getReferenceType() == "PackagingCaseToPack")) {
                caseRef = packReferences[counter].getSource();
            }
        }
    } else if (objectType1 == "Case") {
        logger.info("-_-2-_-");
        caseRef = node;
    }

    var gtinVal = caseRef.getValue("GTIN").getSimpleValue(); //50195500000010
    logger.info("-_-gtinVal-_-" + gtinVal);
    if (gtinVal != null) {
        var GTINPrefixGeneratorRefObj = step.getProductHome().getProductByID(gtinVal);
        logger.info("-_-GTINPrefixGeneratorRefObj-_-" + GTINPrefixGeneratorRefObj);
        if (GTINPrefixGeneratorRefObj != null) {
            var ProgramName = GTINPrefixGeneratorRefObj.getValue("ProgramName").getSimpleValue();
            logger.info(ProgramName + "-_-Inside not equal-_-_-" + ProgramName1);
            if (ProgramName != ProgramName1) {
                logger.info("-_-Inside not equal-_-_-");
				 //Added  as a part of 3173 Started
				GTINPrefixGeneratorRefObj.getValue("ProgramName").setSimpleValue(ProgramName1);
				//Added  as a part of 3173 Ended
               // throw "\n\nProvided Case GTIN is not Matching with Assembly Item.\n";
            }
        }
    }
    logger.info("-caseRef-_-" + caseRef);
}


function getPackCase(tempObj, fetchGTIN) {
    var packCase = tempObj;
    logger.info(objectType1 + "-_-GTIN1-_-_-_-_-" + node.getValue("GTIN").getSimpleValue());
    if (objectType1 == "Pack") {
        logger.info("-_-2-_-_-_-_-");
        packReferences = packCase.getReferencedByProducts().toArray();
        for (var counter = 0; counter < packReferences.length; counter++) {
            if ((packReferences[counter].getReferenceType() == "PackagingCaseToPack")) {
                caseRef = packReferences[counter].getSource();
                var caseReferences = caseRef.getReferencedByProducts().toArray();
                if (caseReferences.length > 0) {
                    for (var j = 0; j < caseReferences.length; j++) {
                        if ((caseReferences[j].getReferenceType() == "PackagingPalletToCase")) {
                            palletRef = caseReferences[j].getSource();
                        }
                    }
                }
            }
        }
        logger.info("-_-GTIN2-_-_-_-_-" + node.getValue("GTIN").getSimpleValue());
        if (fetchGTIN != null) {
            if (caseRef != null) {
            	 caseRef.getValue("GTIN").setSimpleValue(fetchGTIN);
                caseRef.getValue("LastChangeDate").setSimpleValue(currentDate);
                caseRef.getValue("LastUpdatedBy").setSimpleValue(CurrentUser);
            }
            packCase.getValue("IsNewItem").setSimpleValue("Yes");


            packCase.getValue("LastChangeDate").setSimpleValue(currentDate);
            packCase.getValue("LastUpdatedBy").setSimpleValue(CurrentUser);

        }
        logger.info("-_-GTIN33-_-_-_-_-" + node.getValue("GTIN").getSimpleValue());
    } else if (objectType1 == "Case") {
        logger.info("-_-3-_-_-_-_-");
        caseReferences = packCase.getReferencedByProducts().toArray();
        if (caseReferences.length > 0 && objectType1 == "Case") {
            for (var j = 0; j < caseReferences.length; j++) {
                if ((caseReferences[j].getReferenceType() == "PackagingPalletToCase")) {
                    palletRef = caseReferences[j].getSource();
                    //logger.info("-_-_-palletRef-_-" + palletRef);
                }
            }
        }
        if (fetchGTIN != null) {
            packCase.getValue("GTIN").setSimpleValue(fetchGTIN);
            packCase.getValue("IsNewItem").setSimpleValue("Yes");
            packCase.getValue("LastChangeDate").setSimpleValue(currentDate);
            packCase.getValue("LastUpdatedBy").setSimpleValue(CurrentUser);
        }
        logger.info("-_-GTIN3-_-_-_-_-" + node.getValue("GTIN").getSimpleValue());
    }
}

function getMcDItem(node) {
    var mcdrefID = null;
    var nodereferences = node.getReferences().asSet().iterator();
    while (nodereferences.hasNext()) {
        var reference1 = nodereferences.next();
        if (reference1.getReferenceType() == "PackToMcDonaldItem") {
            var mcdref = reference1.getTarget().getID();
            mcdrefID = step.getProductHome().getProductByID(mcdref);
        }
    }
    return mcdrefID
}


//The below added by Shiva to poulate GTINUsed from GTIN for Case - As Suggested by Suresh.
if (Objtype == "Pack") {
    node.getValue("GTINUsed").setSimpleValue(node.getValue("GTIN").getSimpleValue());
    var referencedby = node.getReferencedByProducts().toArray();
    for (var i = 0; i < referencedby.length; i++) {
        if ((referencedby[i].getReferenceType() == "PackagingCaseToPack")) {
            var Case = referencedby[i].getSource();
            Case.getValue("GTINUsed").setSimpleValue(Case.getValue("GTIN").getSimpleValue());
        }
    }
} else if (Objtype == "Case") {
    node.getValue("GTINUsed").setSimpleValue(node.getValue("GTIN").getSimpleValue());
}




function getOldGTINProduct(node, step, logger) {
    logger.info("-_-getOldGTINProduct-_-");
    var product = step.getProductHome().getProductByID("0195500");
    var children = product.getChildren();
    var oldProduct = children.get(0);
    var child;

    for (var j = 0; j < children.size(); j++) {
        child = oldProduct;

        var dateSplit1 = child.getValue("CreatedOn").getSimpleValue();
        var date1 = dateSplit1.split(' ')[0];
        date1 = date1.split("-");
        var newDate1 = new Date();
        newDate1.setDate(date1[2]);
        newDate1.setMonth(date1[1] - 1);
        newDate1.setYear(date1[0]);

        var date1TimeStamp = dateSplit1.split(' ')[1];
        var timeStamp = date1TimeStamp.split(":");
        newDate1.setMinutes(timeStamp[1]);
        newDate1.setHours(timeStamp[0]);
        newDate1.setSeconds(timeStamp[2]);


        var chilld = children.get(j);
        var dateSplit2 = chilld.getValue("CreatedOn").getSimpleValue();
        var date2 = dateSplit2.split(' ')[0];
        date2 = date2.split("-");
        var newDate2 = new Date();
        newDate2.setDate(date2[2]);
        newDate2.setMonth(date2[1] - 1);
        newDate2.setYear(date2[0]);

        var date2TimeStamp = dateSplit2.split(' ')[1];
        var timeStamp1 = date2TimeStamp.split(":");
        newDate2.setMinutes(timeStamp1[1]);
        newDate2.setHours(timeStamp1[0]);
        newDate2.setSeconds(timeStamp1[2]);

        logger.info(dateSplit1 + "-_-_-_-_-_-_-" + dateSplit2);
        logger.info(newDate1 + "-_-_-" + child + "====" + newDate2 + "-_-_-" + chilld);
        if (newDate1 < newDate2) {
            oldProduct = child;
        } else {
            oldProduct = chilld;
        }
        logger.info("oldProduct " + oldProduct);
    }
    logger.info(oldProduct);
    return oldProduct;
}

//setNewParent();
function setNewParent(){
	var product = step.getProductHome().getProductByID("0195500");
	var children = product.getChildren();
	for(var i = 0; i < children.size(); i++){
		var child = children.get(i);
		if(child.getValue("IsGTINUsed").getSimpleValue() == "Yes"){
			child.setParent(step.getProductHome().getProductByID("GTINUsed"));
		}
	}
}
  </javaScript>
</config>
Action #5 (JavaScriptBusinessActionWithBinds):
<config>
  <bindings>
    <binding alias="node" type="Node" contract="CurrentObjectBindContract"/>
    <binding alias="step" type="Manager" contract="ManagerBindContract"/>
    <binding alias="logger" type="Logger" contract="LoggerBindContract"/>
  </bindings>
  <messages/>
  <javaScript>
//********************** 5 ***************************

/*************************************************************
Rule Name: TMS Workflow Reduction - Approval upon Data Team Step Completion.
Developed: Suresh Maddula/ Shiva Dayal
US:2483
Summary: This business rule will TMS Workflow Reduction - Approval upon Data Team Step Completion.
/*************************************************************/

var IsAutoApproved = node.getValue("InboundFlag").getSimpleValue();
//var IsNewProduct = node.getValue("IsNewProduct").getSimpleValue(); // commented by Sourav Tamli for MDSIM - 4898
var Managed_By = node.getValue("ItemManagedBy").getSimpleValue();
var Responsible_Entity = node.getValue("ItemResponsibleEntity").getSimpleValue();
var ProductGroup = node.getValue("ProductGroup").getSimpleValue();
var ProductCategory = node.getValue("ProductCategory").getSimpleValue();
var currentDate = new Date().toISOString().slice(0, 10);
currentDate = currentDate + " 00:00:00";

var currentuserVal = step.getUserHome().getUserById("STEPSYS");
var currentuserEmail = "STEPSYS" + "(" + currentuserVal.getEMail() + ")";

logger.info("-_-ProductCategory-_-_-" + ProductCategory + "-_-" + Managed_By + "-_-" + ProductGroup);
var mcd = getMcDItem(node);

	
 if ((Managed_By == "TMS" || Managed_By == "McDonald's") && (ProductGroup == "Promotions") && (ProductCategory == "Non-Food Promotions (include toys)"))
{
    logger.info("-_-inside if -_-_-");

    node.getValue("InboundFlag").setSimpleValue("Yes");
    node.getValue("LastChangeDate").setSimpleValue(currentDate);
    
	
	var currentuser = step.getCurrentUser().getID();
	var currentuserVal = step.getUserHome().getUserById(currentuser);
	if (currentuserVal != null)
		node.getValue("LastUpdatedBy").setSimpleValue(currentuser);
	else
		 node.getValue("LastUpdatedBy").setSimpleValue("STEPSYS");	

}else if(IsAutoApproved=="Yes"){
	 node.getValue("LastChangeDate").setSimpleValue(currentDate);
     node.getValue("LastUpdatedBy").setSimpleValue("STEPSYS");
	 //node.getValue("ApprovedByMktCatManager").setSimpleValue(currentuserEmail);
	 var ItemToMarketCategoryRef = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToMarketCategory")).toArray();
    for (var i = 0; i < ItemToMarketCategoryRef.length; i++)
    {
        var CurrentRef = ItemToMarketCategoryRef[i];
        CurrentRef.getValue("MarketQATempObjOnEntryCreatedOn").setSimpleValue(currentDate);
        CurrentRef.getValue("MarketQATempObjOnExitCreatedOn").setSimpleValue(currentDate);
    }
}


function getMcDItem(tempObj)
{
        var facilityrefID = null;
        var nodereferences = tempObj.getReferences().asSet().iterator();
        while (nodereferences.hasNext())
        {
                var reference1 = nodereferences.next();
                if ((reference1.getReferenceType() == "TempObjToItem") || (reference1.getReferenceType() == "PackToMcDonaldItem"))
                {

                        var facilityref = reference1.getTarget().getID();
                        facilityrefID = step.getProductHome().getProductByID(facilityref);
                }
        }
        return facilityrefID
}
  </javaScript>
</config>
Action #6 (JavaScriptBusinessActionWithBinds):
<config>
  <bindings>
    <binding alias="node" type="Node" contract="CurrentObjectBindContract"/>
    <binding alias="step" type="Manager" contract="ManagerBindContract"/>
    <binding alias="workflow" type="Workflow" contract="CurrentWorkflowBindContract"/>
    <binding alias="lookup" type="LookupTableHome" contract="LookupTableHomeBindContract"/>
    <binding alias="logger" type="Logger" contract="LoggerBindContract"/>
  </bindings>
  <messages/>
  <javaScript>
//********************7**************************************
// Added by Sourav Tamli for MDSIM - 6593 :: Started //
ClearReferences()
populateItemRelevantMarketCategory.CheckMarketCategoryStatusInFacility(node, step, logger);
populateItemRelevantMarketCategory.PopulateReleventMarketCategoryDetailsOfItem(node, step, logger, lookup) ;
CopyReferences();
// Added by Sourav Tamli for MDSIM - 6593 :: Ended //

//MDSIM-4303 or MDSIM-3779

validateMfgByPrdCtgy.updateRequestorReviewComments(node, step, true);


function ClearReferences() {

    var ItemToFacilityExt = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToFacilityExtension")).toArray();
    var ItemToFacility = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToFacility")).toArray();
    for (var i = 0; i < ItemToFacilityExt.length; i++) {

        ItemToFacilityExt[i].getValue("ItemRelevantMarketCategory").setSimpleValue("");

    }
    for (var j = 0; j < ItemToFacility.length; j++) {

        ItemToFacility[j].getValue("ItemRelevantMarketCategory").setSimpleValue("");

    }

}

function CopyReferences(){

	var ItemToFacilityExt = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToFacilityExtension")).toArray();
	var ItemToFacility = node.getReferences(step.getReferenceTypeHome().getReferenceTypeByID("ItemToFacility")).toArray();
	for(var i = 0 ; i < ItemToFacilityExt.length ; i++){
	
		for(var j = 0 ; j < ItemToFacility.length ; j++){
		
			if(ItemToFacilityExt[i].getTarget().getID() == ItemToFacility[j].getTarget().getID()){
			
				ItemToFacility[j].getValue("ItemRelevantMarketCategory").setSimpleValue(ItemToFacilityExt[i].getValue("ItemRelevantMarketCategory").getSimpleValue());
			
			}
		
		}
	
	}

}
  </javaScript>
</config> -->
            <SetupGroupLink SetupGroupID="Workflows"></SetupGroupLink>
            <Name>acn-f5569719-cb3d-48eb-992e-3f9fe0b5be1a</Name>
            <OnApprove ApproveSetup="Never"></OnApprove>
            <Configuration>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</Configuration>
            <ValidObjectTypes AllObjectTypesValid="true">
                <ValidObjectType ID="Case"></ValidObjectType>
                <ValidObjectType ID="McDTargetMarketTempObject"></ValidObjectType>
                <ValidObjectType ID="McDonaldItem"></ValidObjectType>
                <ValidObjectType ID="Pack"></ValidObjectType>
            </ValidObjectTypes>
        </BusinessRule>
    </BusinessRules>
</STEP-ProductInformation>